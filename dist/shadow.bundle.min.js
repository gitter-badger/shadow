var Absurd=function(){function b(a){return a?a.replace(/^\s+|\s+$/g,""):""}var d={api:{},helpers:{},plugins:{},processors:{css:{plugins:{}},html:{plugins:{},helpers:{}},component:{plugins:{}}}},e=function(a){return a.indexOf("css/CSS.js")>0||"/../CSS.js"==a?d.processors.css.CSS:a.indexOf("html/HTML.js")>0?d.processors.html.HTML:a.indexOf("component/Component.js")>0?d.processors.component.Component:"js-beautify"==a?{html:function(a){return a}}:"./helpers/PropAnalyzer"==a?d.processors.html.helpers.PropAnalyzer:"../../helpers/TransformUppercase"==a?d.helpers.TransformUppercase:"./helpers/TemplateEngine"==a||"../html/helpers/TemplateEngine"==a?d.processors.html.helpers.TemplateEngine:"../helpers/Extend"==a?d.helpers.Extend:"../helpers/Clone"==a?d.helpers.Clone:"../helpers/Prefixes"==a||"/../../../helpers/Prefixes"==a?d.helpers.Prefixes:a==f+"/../../../../"?Absurd:"../helpers/CSSParse"==a?d.helpers.CSSParse:function(){}},f="",g=function(a,b){!function c(){a.length>0&&a.shift().apply(b||{},[c].concat(Array.prototype.slice.call(arguments,0)))}()},h=function(a){var b={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],body:[0,"",""],_default:[1,"<div>","</div>"]};b.optgroup=b.option,b.tbody=b.tfoot=b.colgroup=b.caption=b.thead,b.th=b.td;var c=/<\s*\w.*?>/g.exec(a),d=document.createElement("div");if(null!=c){var e=c[0].replace(/</g,"").replace(/>/g,"").split(" ")[0];if("body"===e.toLowerCase()){var f=(document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),document.createElement("body"));d.innerHTML=a.replace(/<body/g,"<div").replace(/<\/body>/g,"</div>");var g=d.firstChild.attributes;f.innerHTML=a;for(var h=0;h<g.length;h++)f.setAttribute(g[h].name,g[h].value);return f}var d,i=b[e]||b._default;a=i[1]+a+i[2],d.innerHTML=a;for(var j=i[0]+1;j--;)d=d.lastChild}else d.innerHTML=a,d=d.lastChild;return d},i=function(a,b,c){return a.addEventListener?(a.addEventListener(b,c,!1),!0):a.attachEvent?a.attachEvent("on"+b,c):void 0},j=function(a){for(var b,c=a.childNodes,d=c.length,e=0,f=/^\s*$/;d>e;e++)b=c[e],3==b.nodeType&&f.test(b.nodeValue)&&(a.removeChild(b),e--,d--);return a},k=function(b,c,d){for(var e=document.createElement(b),f=0;f<c.length,a=c[f];f++)e.setAttribute(a.name,a.value);return e.innerHTML=d,e},l=function(a,b){return b=b===!1?document:b||this.el||document,b.querySelector(a)},m=function(a,b){return b=b===!1?document:b||this.el||document,b.querySelectorAll(a)},n=function(a,b){return b=b||this.el,b&&b.currentStyle?b.currentStyle[a]:window.getComputedStyle?document.defaultView.getComputedStyle(b,null).getPropertyValue(a):null},q=function(a,b){if(b=b||this.el,b.classList)b.classList.add(a);else{var c=b.className;c.indexOf(a)<0&&(""==c?b.className=a:b.className+=" "+a)}return this},r=function(a,b){if(b=b||this.el,b.classList)b.classList.remove(a);else{for(var c=b.className.split(" "),d=[],e=0;e<c.length;e++)c[e]!=a&&d.push(c[e]);b.className=d.join(" ")}return this},s=function(a,b,c){c=c||this.el;for(var d=c.className.split(" "),e=!1,f=0;f<d.length;f++)d[f]==a&&(e=!0,d[f]=b);return e?(c.className=d.join(" "),this):q(b,c)},t=function(a,b){if(b=b||this.el,b.classList)b.classList.toggle(a);else{for(var c=b.className.split(" "),d=-1,e=c.length;e--;)c[e]===a&&(d=e);d>=0?c.splice(d,1):c.push(a),b.className=c.join(" ")}return this},u=function(a,b,c){return b instanceof Array&&(c=b,b=this),b||(b=this),function(){a.apply(b,(c||[]).concat(Array.prototype.slice.call(arguments,0)))}},w=function(a,b,c,e){var f=d.helpers.Extend({__name:a},e),o=d.helpers.Extend,p=[];f.listeners=p,f.on=function(a,b,c){return p[a]||(p[a]=[]),p[a].push({callback:b,scope:c}),this},f.off=function(a,b){return p[a]?(b||(p[a]=[]),this):this},f.dispatch=function(a,b,d){if(!b||"object"!=typeof b||b instanceof Array||(b.target=this),p[a])for(var e=0;e<p[a].length;e++){var f=p[a][e].callback;f.apply(d||p[a][e].scope||{},[b])}return this[a]&&"function"==typeof this[a]&&this[a](b),c&&c.dispatch(a,b),this};var v={};f.set=function(a,b){return v[a]=b,this},f.get=function(a){return v[a]};var w=!1;f.__handleCSS=function(c){return this.css?b.flush().morph("dynamic-css").add(this.css).compile(function(b,d){if(w)w.raw!==d&&(w.raw=d,w.element.innerHTML=d);else{var e=k("style",[{name:"id",value:a+"-css"},{name:"type",value:"text/css"}],d);(l("head")||l("body")).appendChild(e),w={raw:d,element:e}}c()},this):c(),this},f.applyCSS=function(a,b,c){if(this.html&&"string"==typeof this.html&&!b){var d={};d[this.html]=a,a=d}return this.css=a,c||this.populate(),this};var x=!1;f.__mergeDOMElements=function(a,b){if(j(a),j(b),"undefined"!=typeof a&&"undefined"!=typeof b&&!a.isEqualNode(b)){if(a.nodeName!==b.nodeName)return void(a.parentNode&&a.parentNode.replaceChild(b,a));if(a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),a.attributes){for(var c,d,e=a.attributes,g=b.attributes,h={},i=0;i<e.length,c=e[i];i++){for(var k=0;k<g.length,d=g[k];k++)c.name===d.name&&(a.setAttribute(c.name,d.value),h[c.name]=!0,"value"===c.name&&(a.value=d.value));h[c.name]||a.removeAttribute(c.name)}for(var i=0;i<g.length,d=g[i];i++)h[d.name]||(a.setAttribute(d.name,d.value),"value"===d.name&&(a.value=d.value))}var l=[];if(a.childNodes.length>=b.childNodes.length)for(var i=0;i<a.childNodes.length;i++)b.childNodes[i]||b.appendChild(document.createTextNode("")),l.push([a.childNodes[i],b.childNodes[i]]);else for(var i=0;i<b.childNodes.length;i++)a.appendChild(document.createTextNode("")),l.push([a.childNodes[i],b.childNodes[i]]);for(var i=0;i<l.length;i++)f.__mergeDOMElements(l[i][0],l[i][1])}},f.__handleHTML=function(a){var c=this,d=function(){b.flush().morph("html").add(x).compile(function(b,d){c.el?f.__mergeDOMElements(c.el,h(d)):c.el=h(d),a()},c)};if(this.html)if("string"==typeof this.html){if(!this.el){var e=l(this.html);e&&(this.el=e,x={"":this.el.outerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">")})}d()}else"object"==typeof this.html?(x=o({},this.html),d()):a();else a();return this},f.applyHTML=function(a,b){return this.html=a,b||this.populate(),this};var y=!1;f.__append=function(a){return!y&&this.el&&this.get("parent")&&(y=!0,this.get("parent").appendChild(this.el)),a(),this};var z={events:{}};f.__handleEvents=function(a){if(this.el){var b=this,c=function(a){var c=a.getAttribute("data-absurd-event"),d=function(c){if(c=c.split(":"),c.length>=2){var d=c[0],e=c[1];c.splice(0,2);var f=c;(!z.events[d]||z.events[d].indexOf(a)<0)&&(z.events[d]||(z.events[d]=[]),z.events[d].push(a),i(a,d,function(a){if("function"==typeof b[e]){var c=b[e];c.apply(b,[a].concat(f))}}))}};c=c.split(/, ?/g);for(var e=0;e<c.length;e++)d(c[e])};this.el.hasAttribute&&this.el.hasAttribute("data-absurd-event")&&c(this.el);for(var d=this.el.querySelectorAll?this.el.querySelectorAll("[data-absurd-event]"):[],e=0;e<d.length;e++)c(d[e])}return a(),this},f.__getAnimAndTransEndEventName=function(a){if(a){var b,c={animation:["animationend","transitionend"],OAnimation:["oAnimationEnd","oTransitionEnd"],MozAnimation:["animationend","transitionend"],WebkitAnimation:["webkitAnimationEnd","webkitTransitionEnd"]};for(b in c)if(void 0!==a.style[b])return c[b]}},f.onAnimationEnd=function(a,b){1==arguments.length&&(b=a,a=this.el);var c=this,d=f.__getAnimAndTransEndEventName(a);return d?void this.addEventListener(a,d[0],function(a){b.apply(c,[a])}):void b.apply(this,[{error:"Animations not supported."}])},f.onTransitionEnd=function(a,b){1==arguments.length&&(b=a,a=this.el);var c=this,d=f.__getAnimAndTransEndEventName(a);return d?void this.addEventListener(a,d[1],function(a){b.apply(c,[a])}):void b.apply(this,[{error:"Animations not supported."}])};var A={funcs:{},index:0};f.__handleAsyncFunctions=function(a){if(this.el){var b=[];if(this.el.hasAttribute&&this.el.hasAttribute("data-absurd-async"))b.push(this.el);else for(var c=this.el.querySelectorAll?this.el.querySelectorAll("[data-absurd-async]"):[],d=0;d<c.length;d++)b.push(c[d]);if(0===b.length)a();else{var e=this;!function f(){if(0===b.length)a();else{var c=b.shift(),d=c.getAttribute("data-absurd-async"),g=function(a){"string"==typeof a?c.parentNode.replaceChild(h(a),c):c.parentNode.replaceChild(a,c),f()};"function"==typeof e[A.funcs[d].name]?e[A.funcs[d].name].apply(e,[g].concat(A.funcs[d].args)):"function"==typeof A.funcs[d].func&&A.funcs[d].func.apply(e,[g].concat(A.funcs[d].args))}}()}}else a();return this},f.async=function(){var a=Array.prototype.slice.call(arguments,0),b=a.shift(),c="_"+A.index++;return A.funcs[c]={args:a,name:b},'<script data-absurd-async="'+c+'"></script>'},f.child=function(){var a=Array.prototype.slice.call(arguments,0),b=this.get("children"),c=b&&b[a.shift()],d="_"+A.index++;return A.funcs[d]={args:a,func:function(a){c.populate({callback:function(b){a(b.html.element)}})}},'<script data-absurd-async="'+d+'"></script>'},f.wire=function(a){return b.components.events.on(a,this[a]||function(){},this),this};var B=!1;return f.populate=function(a){if(!B){B=!0;var b=function(a){return a(),this};return g([a&&a.css===!1?b:f.__handleCSS,a&&a.html===!1?b:f.__handleHTML,f.__append,f.__handleEvents,f.__handleAsyncFunctions,function(){B=!1,A={funcs:{},index:0};var b={css:w,html:{element:this.el}};this.dispatch("populated",b),a&&"function"==typeof a.callback&&a.callback(b)}],this),this}},f.str2DOMElement=h,f.addEventListener=i,f.queue=g,f.qs=l,f.qsa=m,f.getStyle=n,f.addClass=q,f.removeClass=r,f.replaceClass=s,f.bind=u,f.toggleClass=t,f.compileHTML=function(a,c,d){b.flush().morph("html").add(a).compile(c,d)},f.compileCSS=function(a,c,d){b.flush().add(a).compile(c,d)},f.delay=function(a,b,c){var d=this;setTimeout(function(){b.apply(d,c)},a)},f},x=function(a){a.di.register("is",{appended:function(a){return"undefined"==typeof a&&(a=this.host.html),l(a)?!0:!1},hidden:function(a){return a=a||this.host.el,null===a.offsetParent}}),a.di.register("router",{routes:[],mode:null,root:"/",getFragment:function(){var a="";if("history"===this.mode){if(!location)return"";a=this.clearSlashes(decodeURI(location.pathname+location.search)),a=a.replace(/\?(.*)$/,""),a="/"!=this.root?a.replace(this.root,""):a}else{if(!window)return"";var b=window.location.href.match(/#(.*)$/);a=b?b[1]:""}return this.clearSlashes(a)},clearSlashes:function(a){return a.toString().replace(/\/$/,"").replace(/^\//,"")},add:function(a,b){return"function"==typeof a&&(b=a,a=""),this.routes.push({re:a,handler:b}),this},remove:function(a){for(var b,c=0;c<this.routes.length,b=this.routes[c];c++)if(b.handler===a||b.re===a)return this.routes.splice(c,1),this;return this},flush:function(){return this.routes=[],this.mode=null,this.root="/",this},config:function(a){return this.mode=a&&a.mode&&"history"==a.mode&&history.pushState?"history":"hash",this.root=a&&a.root?"/"+this.clearSlashes(a.root)+"/":"/",this},listen:function(a){var b=this,c=b.getFragment(),d=function(){c!==b.getFragment()&&(c=b.getFragment(),b.check(c))};return clearInterval(this.interval),this.interval=setInterval(d,a||50),this},check:function(a){for(var b=a||this.getFragment(),c=0;c<this.routes.length;c++){var d=b.match(this.routes[c].re);if(d)return d.shift(),this.routes[c].handler.apply(this.host||{},d),this}return this},navigate:function(a){return a=a?a:"","history"===this.mode?history.pushState(null,null,this.root+this.clearSlashes(a)):(window.location.href.match(/#(.*)$/),window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+a),this}}),a.di.register("ajax",{request:function(a){"string"==typeof a&&(a={url:a}),a.url=a.url||"",a.method=a.method||"get",a.data=a.data||{};var b=function(a,b){var c,d=[];for(var e in a)d.push(e+"="+encodeURIComponent(a[e]));return c=d.join("&"),""!=c?b?b.indexOf("?")<0?"?"+c:"&"+c:c:""},c={host:this.host||{},process:function(a){var c=this;return this.xhr=null,window.ActiveXObject?this.xhr=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(this.xhr=new XMLHttpRequest),this.xhr&&(this.xhr.onreadystatechange=function(){if(4==c.xhr.readyState&&200==c.xhr.status){var b=c.xhr.responseText;a.json===!0&&"undefined"!=typeof JSON&&(b=JSON.parse(b)),c.doneCallback&&c.doneCallback.apply(c.host,[b,c.xhr])}else 4==c.xhr.readyState&&c.failCallback&&c.failCallback.apply(c.host,[c.xhr]);c.alwaysCallback&&c.alwaysCallback.apply(c.host,[c.xhr])},"get"==a.method?this.xhr.open("GET",a.url+b(a.data,a.url),!0):(this.xhr.open(a.method,a.url,!0),this.setHeaders({"X-Requested-With":"XMLHttpRequest","Content-type":"application/x-www-form-urlencoded"})),a.headers&&"object"==typeof a.headers&&this.setHeaders(a.headers),setTimeout(function(){"get"==a.method?c.xhr.send():c.xhr.send(b(a.data))},20)),this},done:function(a){return this.doneCallback=a,this},fail:function(a){return this.failCallback=a,this},always:function(a){return this.alwaysCallback=a,this},setHeaders:function(a){for(var b in a)this.xhr&&this.xhr.setRequestHeader(b,a[b])}};return c.process(a)}});var b=function(a,c){var d=b.prototype.host,e={el:null};switch(typeof a){case"undefined":e.el=d.el;break;case"string":c=c&&"string"==typeof c?l.apply(d,[c]):c,e.el=l(a,c||d.el||document);break;case"object":if("undefined"==typeof a.nodeName){var f=function(a,b){b=b||this;for(var c in b)"undefined"!=typeof b[c].el?b[c]=b[c].val(a):"object"==typeof b[c]&&(b[c]=f(a,b[c]));return delete b.val,b},g={val:f};for(var h in a)g[h]=b.apply(this,[a[h]]);return g}e.el=a}return e.val=function(a){if(!this.el)return null;var b=!!a,d=function(a){return b?(this.el.value=a,e):this.el.value};switch(this.el.nodeName.toLowerCase()){case"input":var f=this.el.getAttribute("type");if("radio"!=f&&"checkbox"!=f)return d.apply(this,[a]);for(var g=m('[name="'+this.el.getAttribute("name")+'"]',c),h=[],i=0;i<g.length;i++)b&&g[i].checked&&g[i].value!==a?g[i].removeAttribute("checked"):b&&g[i].value===a?(g[i].setAttribute("checked","checked"),g[i].checked="checked"):g[i].checked&&h.push(g[i].value);if(!b)return"radio"==f?h[0]:h;break;case"textarea":return d.apply(this,[a]);case"select":if(!b)return this.el.value;for(var j=m("option",this.el),i=0;i<j.length;i++)j[i].getAttribute("value")===a?this.el.selectedIndex=i:j[i].removeAttribute("selected");break;default:if(!b)return"undefined"!=typeof this.el.textContent?this.el.textContent:"undefined"!=typeof this.el.innerText?typeof this.el.innerText:this.el.innerHTML;this.el.innerHTML=a}return b?e:null},e.dom=function(a,c){return b(a,c||e.el)},e};a.di.register("dom",b);var c=function(b,d,e){var f=c.prototype.host,g=!(!window||!window.matchMedia||e);if(g){var h=window.matchMedia(b);d.apply(f,[h.matches,h.media]),h.addListener(function(a){d.apply(f,[a.matches,a.media])})}else{var i=".match-media-"+a.components.numOfComponents,j={},k={};j[i]={display:"block"},j[i]["@media "+b]={display:"none"},k["span"+i]="",a.component(i+"-component",{css:j,html:k,intervaliTime:30,status:"",loop:function(){var a=this;if(this.el){var b=this.getStyle("display");this.status!=b&&(this.status=b,d.apply(f,["none"===b]))}setTimeout(function(){a.loop()},this.intervaliTime)},constructor:["dom",function(a){var b=this;this.set("parent",a("body").el).populate(),setTimeout(function(){b.loop()},this.intervaliTime)}]})()}};a.di.register("mq",c)},y=function(){return function(a){var b=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a},e={defaultProcessor:d.processors.css.CSS()},f={},g={},i={},j={};e.getRules=function(a){return"undefined"==typeof a?f:("undefined"==typeof f[a]&&(f[a]=[]),f[a])},e.getPlugins=function(){return i},e.getStorage=function(){return g},e.flush=function(){return f={},g=[],j={},e.defaultProcessor=d.processors.css.CSS(),e},e["import"]=function(){return e.callHooks("import",arguments)?e:e},e.handlecss=function(a,b){var c=e.getPlugins();if(a&&"stylesheet"===a.type&&a.stylesheet&&a.stylesheet.rules)for(var d=a.stylesheet.rules,f=0;rule=d[f];f++)switch(rule.type){case"rule":e.handlecssrule(rule);break;case"import":e.handlecssimport(rule,b);break;default:c[rule.type]&&c[rule.type](e,rule)}return e},e.handlecssimport=function(){return e},e.handlecssrule=function(a,c){var d={},f={};if(a.declarations&&a.declarations.length>0){for(var g=0;decl=a.declarations[g];g++)"declaration"===decl.type&&(f[decl.property]=decl.value);if(a.selectors&&a.selectors.length>0)for(var g=0;selector=a.selectors[g];g++)d[selector]=b({},f);e.add(d,c)}return e},e.addHook=function(a,b){j[a]||(j[a]=[]);for(var d=!1,e=0;c=j[a][e];e++)c===b&&(d=!0);d===!1?j[a].push(b):null},e.callHooks=function(a,b){if(j[a])for(var d=0;c=j[a][d];d++)if(c.apply(e,b)===!0)return!0;return!1},e.numOfAddedRules=0,e.components=function(a){var b=d.helpers.Extend,c=d.helpers.Clone,e={},f=[],g=b({},w()),h={};return function(a){window&&(window.addEventListener?window.addEventListener("load",a):window.attachEvent&&window.attachEvent("onload",a))}(function(){h.broadcast("ready")}),h={numOfComponents:0,events:g,register:function(d,h){return this.numOfComponents+=1,e[d]=function(){var e=b({},w(d,a,g,c(h)));return a.di.resolveObject(e),f.push(e),"function"==typeof e.constructor&&e.constructor.apply(e,Array.prototype.slice.call(arguments,0)),e}},get:function(a){if(e[a])return e[a];throw new Error("There is no component with name '"+a+"'.")},remove:function(a){return e[a]?(delete e[a],!0):!1},list:function(){var a=[];for(var b in e)a.push(b);return a},flush:function(){return e={},f=[],this},broadcast:function(a,b){for(var c=0;c<f.length,instance=f[c];c++)"function"==typeof instance[a]&&instance[a](b);return this}}}(e),e.component=function(a){return function(b,c){return"undefined"==typeof c?a.components.get(b):a.components.register(b,c)}}(e),e.di=d.DI(e),x(e),e.compile=function(a,c){if(e.callHooks("compile",arguments))return e;var d={combineSelectors:!0,minify:!1,processor:e.defaultProcessor,keepCamelCase:!1,api:e};c=b(d,c||{});var f=c.processor(e.getRules(),a||function(){},c);return e.flush(),f};for(var k in d.api)"compile"!==k&&(e[k]=d.api[k](e),e[k]=function(a){return function(){var b=d.api[a](e);return e.callHooks(a,arguments)?e:b.apply(e,arguments)}}(k));for(var l in d.processors.css.plugins)e.plugin(l,d.processors.css.plugins[l]());return"function"==typeof a&&a(e),"undefined"!=typeof Organic&&Organic.init(e),e.utils={str2DOMElement:h},e}};d.DI=function(){var a={dependencies:{},register:function(a,b){return this.dependencies[a]=b,this},resolve:function(){var a,b,c,d=this,e=!1;"string"==typeof arguments[0]?(a=arguments[1],b=arguments[0].replace(/ /g,"").split(","),c=arguments[2]||{}):(a=arguments[0],b=a.toString().match(/^function\s*[^\(]*\(\s*([^\)]*)\)/m)[1].replace(/ /g,"").split(","),c=arguments[1]||{});for(var f=0;f<b.length;f++)"undefined"!=typeof this.dependencies[b[f]]&&(e=!0);return e?function(){for(var e=[],f=Array.prototype.slice.call(arguments,0),g=0;g<b.length;g++){var h=b[g];if("undefined"!=typeof d.dependencies[h]){var i=d.dependencies[h];"function"==typeof i?i.prototype.host=c:"object"==typeof i&&(i.host=c),e.push(i)}else e.push(f.shift())}return a.apply(c,e)}:a},resolveObject:function(a){if("object"==typeof a)for(var b in a)"function"==typeof a[b]?a[b]=this.resolve(a[b],a):a[b]instanceof Array&&2==a[b].length&&"string"==typeof a[b][0]&&"function"==typeof a[b][1]&&(a[b]=this.resolve(a[b][0],a[b][1],a));return this},flush:function(){return this.dependencies={},this}};return a},d.api.add=function(a){var b=e("../helpers/Extend"),c=e("../helpers/Prefixes"),d=[],f={combineSelectors:!0,preventCombining:["@font-face"]},g=function(b,d,e,f,g){var i=c.nonPrefixProp(d),j=a.getPlugins()[i.prop];if("undefined"!=typeof j){var k=j(a,e,i.prefix);return k&&h(b,k,f,g),!0}return!1},h=function(a,b,e,i){if(e=e||"mainstream",null!==b&&"undefined"!=typeof b&&b!==!1)if(i||a||(a=""),"undefined"!=typeof b.classify&&b.classify===!0&&(b="undefined"!=typeof b.toJSON?b.toJSON():b.toString()),/, ?/g.test(a)&&f.combineSelectors)for(var j=a.replace(/, /g,",").split(","),k=0;k<j.length,p=j[k];k++)h(p,b,e,i);else if(!g(null,a,b,e,i))if("undefined"==typeof b.length||"object"!=typeof b){var l={},m=a,n={},o={};for(var q in b){b[q]&&"undefined"!=typeof b[q].classify&&b[q].classify===!0&&(b[q]="undefined"!=typeof b[q].toJSON?b[q].toJSON():b[q].toString());var r=typeof b[q];"object"!==r&&"function"!==r&&b[q]!==!1&&b[q]!==!0?g(a,q,b[q],e,i)===!1&&(m=0===m.indexOf("^")?m.substr(1,m.length-1)+("undefined"!=typeof i?" "+i:""):"undefined"!=typeof i?i+" "+a:a,l[q]=b[q],c.addPrefixes(q,l)):"object"===r?n[q]=b[q]:"function"===r&&(o[q]=b[q])}d.push({selector:m,props:l,stylesheet:e});for(var q in n)if(":"===q.charAt(0))h(a+q,n[q],e,i);else if(/&/g.test(q))if(/, ?/g.test(q)&&f.combineSelectors)for(var j=q.replace(/, /g,",").split(","),k=0;k<j.length,p=j[k];k++)p.indexOf("&")>=0?h(p.replace(/&/g,a),n[q],e,i):h(p,n[q],e,"undefined"!=typeof i?i+" "+a:a);else h(q.replace(/&/g,a),n[q],e,i);else 0===q.indexOf("@media")||0===q.indexOf("@supports")?h(a,n[q],q,i):0===a.indexOf("@media")||0===q.indexOf("@supports")?h(q,n[q],a,i):0===a.indexOf("^")?h(a.substr(1,a.length-1)+("undefined"!=typeof i?" "+i:"")+" "+q,n[q],e):g(a,q,n[q],e,i)===!1&&h(q,n[q],e,(i?i+" ":"")+a);for(var q in o){var s={};s[q]=o[q](),h(a,s,e,i)}}else for(var k=0;k<b.length;k++)q=b[k],q&&h(a,q,e,i)},i=function(c,e,g){if(a.jsonify)return b(a.getRules(e||"mainstream"),c),a;try{d=[],a.numOfAddedRules+=1,"object"==typeof e&&"undefined"==typeof g&&(f={combineSelectors:"undefined"!=typeof e.combineSelectors?e.combineSelectors:f.combineSelectors,preventCombining:f.preventCombining.concat(e.preventCombining||[])},e=null),"undefined"!=typeof g&&(f={combineSelectors:g.combineSelectors||f.combineSelectors,preventCombining:f.preventCombining.concat(g.preventCombining||[])});var i,j=a.defaultProcessor.type;for(var k in c)h(k,c[k],e||"mainstream");for(var l=0;l<d.length;l++){var e=d[l].stylesheet,k=d[l].selector,m=d[l].props,n=a.getRules(e),o=f&&f.preventCombining?"|"+f.preventCombining.join("|"):"",i=o.indexOf("|"+k.replace(/^%.*?%/,""))>=0?"~~"+a.numOfAddedRules+"~~":"",p=n[i+k]||{};for(var q in m){var r=m[q];q=i+q,"object"!=typeof r&&(p[q]="css"==j?"+"===r.toString().charAt(0)?p&&p[q]?p[q]+", "+r.substr(1,r.length-1):r.substr(1,r.length-1):">"===r.toString().charAt(0)?p&&p[q]?p[q]+" "+r.substr(1,r.length-1):r.substr(1,r.length-1):r:r)}n[i+k]=p}return a}catch(s){throw new Error("Error adding: "+JSON.stringify({rules:c,error:s.toString()}))}};return i};var z=e("../helpers/Extend");d.api.compile=function(a){return function(){for(var b=null,c=function(){},d=null,e=0;e<arguments.length;e++)switch(typeof arguments[e]){case"function":c=arguments[e];break;case"string":b=arguments[e];break;case"object":d=arguments[e]}var f={combineSelectors:!0,minify:!1,keepCamelCase:!1,processor:a.defaultProcessor,api:a};return d=z(f,d||{}),d.processor(a.getRules(),function(d,e){if(null!=b)try{var f=e;"object"==typeof f&&(f=JSON.stringify(f)),C.writeFile(b,f,function(a){c(a,e)})}catch(d){c.apply({},arguments)}else c.apply({},arguments);a.flush()},d)}},d.api.compileFile=function(a){return a.compile};var A=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e};d.api.darken=function(){return function(a,b){return A(a,-(b/100))}},d.api.define=function(a){return function(b,c){return a.getStorage().__defined||(a.getStorage().__defined={}),a.getStorage().__defined[b]=c,a}},d.api.hook=function(a){return function(b,c){return a.addHook(b,c),a}},d.api.importCSS=function(a){var b=e("../helpers/CSSParse");return function(c){try{var d=b(c);a.handlecss(d,"")}catch(e){console.log("Error in the CSS:  '"+c+"'",e,e.stack)}return a}};var A=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e};d.api.lighten=function(){return function(a,b){return A(a,b/100)}};var B={html:function(a){a.defaultProcessor=e(f+"/../processors/html/HTML.js")(),a.hook("add",function(b,c){return a.getRules(c||"mainstream").push(b),!0})},component:function(a){a.defaultProcessor=e(f+"/../processors/component/Component.js")(),a.hook("add",function(b){b instanceof Array||(b=[b]);for(var d=0;d<b.length,c=b[d];d++)a.getRules("mainstream").push(c);return!0})},jsonify:function(a){a.jsonify=!0},"dynamic-css":function(a){a.dynamicCSS=!0}};d.api.morph=function(a){return function(b){return B[b]&&(a.flush(),B[b](a)),a}},d.api.plugin=function(a){var b=function(b,c){return a.getPlugins()[b]=c,a};return b},d.api.raw=function(a){return function(b){var c={},d={},e="____raw_"+a.numOfAddedRules;return d[e]=b,c[e]=d,a.add(c),a}};var C=e("fs");e("path"),d.api.rawImport=function(a){var b=function(b){var c=C.readFileSync(b,{encoding:"utf8"});a.raw(c)};return function(c){var d,e,f;if("string"==typeof c)b(c);else for(e=0,f=c.length;f>e;e++)d=c[e],b(d);return a}},d.api.register=function(a){return function(b,c){return a[b]=c,a}},d.api.storage=function(a){var b=a.getStorage(),c=function(d,e){if("undefined"!=typeof e)b[d]=e;else{if("object"!=typeof d){if(b[d])return b[d];throw new Error("There is no data in the storage associated with '"+d+"'")}for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&c(f,d[f])}return a};return c};var D=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;d.helpers.CSSParse=function(a,c){function d(a){var b=a.match(/\n/g);b&&(F+=b.length);var c=a.lastIndexOf("\n");G=~c?a.length-c:G+a.length}function e(){var a={line:F,column:G};return c.position?function(b){return b.position=new f(a),n(),b}:g}function f(a){this.start=a,this.end={line:F,column:G},this.source=c.source}function g(a){return n(),a}function h(b){var d=new Error(b+" near line "+F+":"+G);throw d.filename=c.source,d.line=F,d.column=G,d.source=a,d}function i(){return{type:"stylesheet",stylesheet:{rules:l()}}}function j(){return m(/^{\s*/)}function k(){return m(/^}/)}function l(){var b,c=[];for(n(),o(c);a.length&&"}"!=a.charAt(0)&&(b=C()||E());)c.push(b),o(c);return c}function m(b){var c=b.exec(a);if(c){var e=c[0];return d(e),a=a.slice(e.length),c}}function n(){m(/^\s*/)}function o(a){var b;for(a=a||[];b=p();)a.push(b);return a}function p(){var b=e();if("/"==a.charAt(0)&&"*"==a.charAt(1)){for(var c=2;""!=a.charAt(c)&&("*"!=a.charAt(c)||"/"!=a.charAt(c+1));)++c;if(c+=2,""===a.charAt(c-1))return h("End of comment missing");var f=a.slice(2,c-2);return G+=2,d(f),a=a.slice(c),G+=2,b({type:"comment",comment:f})}}function q(){var a=m(/^([^{]+)/);return a?b(a[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").split(/\s*,\s*/):void 0}function r(){var a=e(),c=m(/^(\*?[-#\/\*\w]+(\[[0-9a-z_-]+\])?)\s*/);if(c){if(c=b(c[0]),!m(/^:\s*/))return h("property missing ':'");var d=m(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);if(!d)return h("property missing value");var f=a({type:"declaration",property:c.replace(D,""),value:b(d[0]).replace(D,"")});return m(/^[;\s]*/),f}}function s(){var a=[];if(!j())return h("missing '{'");o(a);for(var b;b=r();)a.push(b),o(a);return k()?a:h("missing '}'")}function t(){for(var a,b=[],c=e();a=m(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)b.push(a[1]),m(/^,\s*/);return b.length?c({type:"keyframe",values:b,declarations:s()}):void 0}function u(){var a=e(),b=m(/^@([-\w]+)?keyframes */);if(b){var c=b[1],b=m(/^([-\w]+)\s*/);if(!b)return h("@keyframes missing name");var d=b[1];if(!j())return h("@keyframes missing '{'");for(var f,g=o();f=t();)g.push(f),g=g.concat(o());return k()?a({type:"keyframes",name:d,vendor:c,keyframes:g}):h("@keyframes missing '}'")}}function v(){var a=e(),c=m(/^@supports *([^{]+)/);if(c){var d=b(c[1]);if(!j())return h("@supports missing '{'");var f=o().concat(l());return k()?a({type:"supports",supports:d,rules:f}):h("@supports missing '}'")}}function w(){var a=e(),b=m(/^@host */);if(b){if(!j())return h("@host missing '{'");var c=o().concat(l());return k()?a({type:"host",rules:c}):h("@host missing '}'")}}function x(){var a=e(),c=m(/^@media *([^{]+)/);if(c){var d=b(c[1]);if(!j())return h("@media missing '{'");var f=o().concat(l());return k()?a({type:"media",media:d,rules:f}):h("@media missing '}'")}}function y(){var a=e(),b=m(/^@page */);if(b){var c=q()||[];if(!j())return h("@page missing '{'");for(var d,f=o();d=r();)f.push(d),f=f.concat(o());return k()?a({type:"page",selectors:c,declarations:f}):h("@page missing '}'")}}function z(){var a=e(),c=m(/^@([-\w]+)?document *([^{]+)/);if(c){var d=b(c[1]),f=b(c[2]);if(!j())return h("@document missing '{'");var g=o().concat(l());return k()?a({type:"document",document:f,vendor:d,rules:g}):h("@document missing '}'")}}function A(){var a=e(),b=m(/^@font-face */);if(b){if(!j())return h("@font-face missing '{'");for(var c,d=o();c=r();)d.push(c),d=d.concat(o());return k()?a({type:"font-face",declarations:d}):h("@font-face missing '}'")}}function B(a){var b=new RegExp("^@"+a+" *([^;\\n]+);");return function(){var c=e(),d=m(b);if(d){var f={type:a};return f[a]=d[1].trim(),c(f)}}}function C(){return"@"==a[0]?u()||x()||v()||H()||I()||J()||z()||y()||w()||A():void 0}function E(){var a=e(),b=q();return b?(o(),a({type:"rule",selectors:b,declarations:s()})):h("selector missing")}c=c||{},c.position=c.position===!1?!1:!0;var F=1,G=1;f.prototype.content=a;var H=B("import"),I=B("charset"),J=B("namespace");return i()},d.helpers.Clone=function X(a){if(!a)return a;for(var b,c=[Number,String,Boolean],d=0;d<c.length;d++){var e=c[d];a instanceof e&&(b=e(a))}if("undefined"==typeof b)if("[object Array]"===Object.prototype.toString.call(a))b=[],a.forEach(function(a,c){b[c]=X(a)});else if("object"==typeof a)if(a.nodeType&&"function"==typeof a.cloneNode)var b=a.cloneNode(!0);else if(a.prototype)b=a;else if(a instanceof Date)b=new Date(a);else{b={};for(var d in a)b[d]=X(a[d])}else b=a;return b},d.helpers.ColorLuminance=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e},d.helpers.Extend=function(){for(var a=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a},b=arguments[0],c=1;c<arguments.length;c++)b=a(b,arguments[c]);return b};var E=function(a){var b,c;return(c=a.match(/^\-(w|m|s|o)+\-/)||"-"===a.charAt(0))&&!a.match(/^\-(webkit|moz|ms)+\-/)?null!==c&&c[0]?(b={prefix:c[0].replace(/-/g,"")},b.prop=a.replace(c[0],"")):(b={prefix:""},b.prop=a.substr(1,a.length)):b={prefix:!1,prop:a},b};d.helpers.Prefixes={addPrefixes:function(a,b){var c=a,d=E(a),e=b[a];d.prefix!==!1&&(delete b[c],b[d.prop]=e,(""===d.prefix||d.prefix.indexOf("w")>=0)&&(b["-webkit-"+d.prop]=e),(""===d.prefix||d.prefix.indexOf("m")>=0)&&(b["-moz-"+d.prop]=e),(""===d.prefix||d.prefix.indexOf("s")>=0)&&(b["-ms-"+d.prop]=e),(""===d.prefix||d.prefix.indexOf("o")>=0)&&(b["-o-"+d.prop]=e))},nonPrefixProp:function(a){var b=E(a);return b.prefix!==!1&&(b.prefix=""==b.prefix?"-":"-"+b.prefix+"-"),b}},d.helpers.RequireUncached=function(a){return delete e.cache[e.resolve(a)],e(a)},d.helpers.TransformUppercase=function(a){for(var b="",d=0;c=a.charAt(d);d++)b+=c===c.toUpperCase()&&c.toLowerCase()!==c.toUpperCase()?"-"+c.toLowerCase():c;return b};var F=function(a,b,d){var g="",h="",i=[],j=d.api;cssPreprocessor=e(f+"/../css/CSS.js")(),htmlPreprocessor=e(f+"/../html/HTML.js")();for(var k=function(a){for(var b=0;b<i.length,component=i[b];b++)"function"==typeof component&&(component=component()),j.add(component.css?component.css:{});cssPreprocessor(j.getRules(),function(b,c){g+=c,a(b)},d)},l=function(b){var c=0,e=null,f=function(){if(c>a.length-1)return void b(e);var g=a[c];"function"==typeof g&&(g=g()),j.morph("html").add(g.html?g.html:{}),htmlPreprocessor(j.getRules(),function(a,b){
h+=b,c+=1,e=a,f()},d)};f()},m=function(a){for(var b in a)if("_include"===b)if(a[b]instanceof Array)for(var d=0;d<a[b].length,c=a[b][d];d++)"function"==typeof c&&(c=c()),i.push(c),m(c);else"function"==typeof a[b]&&(a[b]=a[b]()),i.push(a[b]),m(a[b]);else"object"==typeof a[b]&&m(a[b])},n=0;n<a.length,c=a[n];n++)"function"==typeof c&&(c=c()),i.push(c),m(c);j.flush(),k(function(a){j.morph("html"),l(function(c){b(a||c?{error:{css:a,html:c}}:null,g,h)})})};d.processors.component.Component=function(){var a=function(a,b,c){F(a.mainstream,b,c)};return a.type="component",a};var G="\n",H={combineSelectors:!0,minify:!1,keepCamelCase:!1},I=e("../../helpers/TransformUppercase"),z=e("../../helpers/Extend"),J=function(a,b,c){var d="";c=c||["","  "];for(var e in a)if(0===e.indexOf("____raw"))d+=a[e][e]+G;else{var f=c[0]+e.replace(/~~(.+)~~/,"").replace(/^%.*?%/,"")+" {"+G,g="";for(var h in a[e]){var i=a[e][h];""===i&&(i='""'),h=h.replace(/~~(.+)~~/,"").replace(/^%.*?%/,""),g+=b&&b.keepCamelCase===!0?c[1]+h+": "+i+";"+G:c[1]+I(h)+": "+i+";"+G}""!=g&&(f+=g,f+=c[0]+"}"+G,d+=f)}return d},K=function(a){var b={};for(var c in a){var d=a[c];if("mainstream"==c)for(var e in d){b[e]={};for(var f in d[e])b[e][f]=d[e][f]}else if(c.indexOf("@media")>=0){b[c]={};for(var e in d){b[c][e]={};for(var f in d[e])b[c][e][f]=d[e][f]}}}return b},L=function(a,b){var c=[],d={},b=[].concat(b||[]);b.splice(0,0,""),b=b.join("|");for(var e in a){var f=a[e];for(var g in f)c.push({selector:e,prop:g,value:f[g],combine:b.indexOf("|"+g)<0&&e.indexOf("@font-face")<0})}for(var h=0;h<c.length;h++)if(c[h].combine===!0&&c[h].selector!==!1)for(var i=h+1;i<c.length;i++)c[h].prop===c[i].prop&&c[h].value===c[i].value&&(c[h].selector+=", "+c[i].selector.replace(/~~(.+)~~/,"").replace(/^%.*?%/,""),c[i].selector=!1);for(var h=0;h<c.length;h++)c[h].selector!==!1&&(d[c[h].selector]||(d[c[h].selector]={}),d[c[h].selector][c[h].prop]=c[h].value);return d},M=function(a){return a=a.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,""),a=a.replace(/ {2,}/g," "),a=a.replace(/ ([{:}]) /g,"$1"),a=a.replace(/([;,]) /g,"$1"),a=a.replace(/ !/g,"!")},N=function(a,b){if(b&&b.api&&b.api.getStorage().__defined){var c=b.api.getStorage().__defined;for(var d in c){var e=new RegExp("<%( )?"+d+"( )?%>","g");a="function"!=typeof c[d]?a.replace(e,c[d]):a.replace(e,c[d]())}}return a};d.processors.css.CSS=function(){var a=function(a,b,c){if(c=c||H,c.api&&c.api.jsonify){var d=K(a,c);return b(null,d),d}var f="";for(var g in a){var h=a[g];h=c.combineSelectors?L(h,c.preventCombining):h,f+="mainstream"===g?J(h,c):g+" {"+G+J(h,c,["  ","    "])+"}"+G}return f=N(f,c),c&&c.api&&c.api.dynamicCSS&&(f=e("../html/helpers/TemplateEngine")(f,c)),c.minify?(f=M(f),b&&b(null,f)):b&&b(null,f),f};return a.type="css",a},d.processors.css.plugins.charset=function(){return function(a,b){"string"==typeof b?a.raw('@charset: "'+b+'";'):"object"==typeof b&&(b=b.charset.replace(/:/g,"").replace(/'/g,"").replace(/"/g,"").replace(/ /g,""),a.raw('@charset: "'+b+'";'))}},d.processors.css.plugins.document=function(){return function(a,b){if("object"==typeof b){var c="";if(c+="@"+b.vendor+"document",c+=" "+b.document,b.rules&&b.rules.length)for(var d=0;rule=b.rules[d];d++)a.handlecssrule(rule,c);else"undefined"!=typeof b.styles&&a.add(b.styles,c)}}},d.processors.css.plugins.keyframes=function(){return function(a,b){if(e(f+"/../CSS.js")(),e(f+"/../../../helpers/Prefixes"),"object"==typeof b){var c;if("undefined"!=typeof b.frames)c=b.frames;else if("undefined"!=typeof b.keyframes){c={};for(var d=0;rule=b.keyframes[d];d++)if("keyframe"===rule.type)for(var g=c[rule.values]={},h=0;declaration=rule.declarations[h];h++)"declaration"===declaration.type&&(g[declaration.property]=declaration.value)}if(a.jsonify){var i={};i.keyframes={name:b.name,frames:c},a.add(i)}else{var j=e(f+"/../../../../")();j.add(c).compile(function(c,d){var e="@keyframes "+b.name+" {\n";e+=d,e+="}",e=e+"\n"+e.replace("@keyframes","@-webkit-keyframes"),a.raw(e)},{combineSelectors:!1})}}}},d.processors.css.plugins.media=function(){return function(a,b){var c=e(f+"/../CSS.js")();if("object"==typeof b){for(var d="@media "+b.media+" {\n",g={},h={},i=0;rule=b.rules[i];i++){var j,k;if(rule.selectors&&(j=g[rule.selectors.toString()]={},k=h[rule.selectors.toString()]={},"rule"===rule.type))for(var l=0;declaration=rule.declarations[l];l++)"declaration"===declaration.type&&(j[declaration.property]=declaration.value,k[declaration.property]=declaration.value)}d+=c({mainstream:g}),d+="}",a.jsonify?a.add(h,"@media "+b.media):a.raw(d)}}},d.processors.css.plugins.namespace=function(){return function(a,b){"string"==typeof b?a.raw('@namespace: "'+b+'";'):"object"==typeof b&&(b=b.namespace.replace(/: /g,"").replace(/'/g,"").replace(/"/g,"").replace(/ /g,"").replace(/:h/g,"h"),a.raw('@namespace: "'+b+'";'))}},d.processors.css.plugins.page=function(){return function(a,b){if("object"==typeof b){var c="";c+=b.selectors.length>0?"@page "+b.selectors.join(", ")+" {\n":"@page {\n";for(var d=0;declaration=b.declarations[d];d++)"declaration"==declaration.type&&(c+="  "+declaration.property+": "+declaration.value+";\n");c+="}",a.raw(c)}}},d.processors.css.plugins.supports=function(){return function(a,b){var c=e(f+"/../CSS.js")();if("object"==typeof b){for(var d="@supports "+b.supports+" {\n",g={},h=0;rule=b.rules[h];h++){var i=g[rule.selectors.toString()]={};if("rule"===rule.type)for(var j=0;declaration=rule.declarations[j];j++)"declaration"===declaration.type&&(i[declaration.property]=declaration.value)}d+=c({mainstream:g}),d+="}",a.raw(d)}}};var O=null,G="\n",H={},P=e("js-beautify").html,Q=e("../../helpers/TransformUppercase"),R={},S=function(a){var b="";for(var c in O)if(c==a)for(var d=O[c].length,e=0;d>e;e++)b+=U("",O[c][e]);return b},T=function(a,b){return b&&b.keepCamelCase===!0?a:Q(a,b)},U=function(a,b){var c="",d="",f="",g=e("./helpers/PropAnalyzer")(a);if(a=g.tag,""!=g.attrs&&(d+=" "+g.attrs),"string"==typeof b||null===b)return V(a,d,b);var h=function(a){""!=f&&(f+=G),f+=a},i=function(a){var b=[];for(var c in a)b.push(c.replace(/^\$/,"")+":"+a[c]);b.length>0&&(/data-absurd-event/g.test(d)?d.replace(/data-absurd-event="(.*)"/,'data-absurd-event="$1,'+b.join(",")+'"'):d+=' data-absurd-event="'+b.join(",")+'"')};for(var j in b){var k=b[j];if(/^\$/.test(j))i(b);else switch(j){case"_attrs":for(var l in k)d+="function"==typeof k[l]?" "+T(l,R)+'="'+k[l]()+'"':" "+T(l,R)+'="'+k[l]+'"';break;case"_":h(k);break;case"_tpl":if("string"==typeof k)h(S(k));else if(k instanceof Array){for(var m="",n=0;tpl=k[n];n++)m+=S(tpl),n<k.length-1&&(m+=G);h(m)}break;case"_include":var m="",p=function(a){"function"==typeof a&&(a=a()),a.css&&a.html&&(a=a.html),m+=U("",a)};if(k instanceof Array)for(var n=0;n<k.length,o=k[n];n++)p(o);else"object"==typeof k&&p(k);h(m);break;default:switch(typeof k){case"string":h(U(j,k));break;case"object":if(k&&k.length&&k.length>0){for(var m="",n=0;v=k[n];n++)m+=U("","function"==typeof v?v():v),n<k.length-1&&(m+=G);h(U(j,m))}else h(U(j,k));break;case"function":h(U(j,k()))}}}return c+=""!=a?V(a,d,f):f},V=function(a,b,c){var d="";return""==a&&""==b&&""!=c?c:(a=""==a?"div":a,d+=null!==c?"<"+T(a,R)+b+">"+G+c+G+"</"+T(a,R)+">":"<"+T(a,R)+b+"/>")},W=function(a){return a=e("./helpers/TemplateEngine")(a.replace(/[\r\t\n]/g,""),R),R.minify?a:P(a,{indent_size:R.indentSize||4})};return d.processors.html.HTML=function(){var a=function(a,b,c){O=a,b=b||function(){},c=R=c||H;var d=W(S("mainstream"));return b(null,d),d};return a.type="html",a},d.processors.html.helpers.PropAnalyzer=function(a){var b={tag:"",attrs:""},d=(a.length,""),e=!1,f=[],g="",h=!1,i="",j=!1;if(/(#|\.|\[|\])/gi.test(a)===!1)return{tag:a,attrs:""};for(var k=0;k<a.length,c=a[k];k++)"["!==c||j?j?"]"!=c?i+=c:(j=!1,k-=1):"."!==c||e?e?"."!=c&&"#"!=c&&"["!=c&&"]"!=c?d+=c:(f.push(d),e=!1,d="",k-=1):"#"!==c||h?h?"."!=c&&"#"!=c&&"["!=c&&"]"!=c?g+=c:(h=!1,k-=1):"."!=c&&"#"!=c&&"["!=c&&"]"!=c&&(b.tag+=c):h=!0:e=!0:j=!0;""!=d&&f.push(d);for(var l="",k=0;cls=f[k];k++)l+=""===l?cls:" "+cls;return b.attrs+=""!=l?'class="'+l+'"':"",""!=g&&(b.attrs+=(""!=b.attrs?" ":"")+'id="'+g+'"'),""===b.tag&&""!=b.attrs&&(b.tag="div"),""!=i&&(b.attrs+=(""!=b.attrs?" ":"")+i),b},d.processors.html.helpers.TemplateEngine=function(a,b){for(var c,d=/<%(.+?)%>/g,e=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,f="with(obj) { var r=[];\n",g=0,h=function(a,b){return f+=b?a.match(e)?a+"\n":"r.push("+a+");\n":""!=a?'r.push("'+a.replace(/"/g,'\\"')+'");\n':"",h};match=d.exec(a);)h(a.slice(g,match.index))(match[1],!0),g=match.index+match[0].length;h(a.substr(g,a.length-g)),f=(f+'return r.join(""); }').replace(/[\r\t\n]/g,"");try{c=new Function("obj",f).apply(b,[b])}catch(i){console.error("'"+i.message+"'"," in \n\nCode:\n",f,"\n")}return c},y()}(window);(function(){function a(a,c,d,e){return new b(a,c,d,e)}function b(a,b,d,e){this.options=e||{},this.options.adapters=this.options.adapters||{},this.obj=a,this.keypath=b,this.callback=d,this.objectPath=[],this.parse(),c(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function c(a){return"object"==typeof a&&null!==a}function d(a){throw new Error("[sightglass] "+a)}a.adapters={},b.tokenize=function(a,b,c){var d,e,f=[],g={i:c,path:""};for(d=0;d<a.length;d++)e=a.charAt(d),~b.indexOf(e)?(f.push(g),g={i:e,path:""}):g.path+=e;return f.push(g),f},b.prototype.parse=function(){var c,e,f=this.interfaces();f.length||d("Must define at least one adapter interface."),~f.indexOf(this.keypath[0])?(c=this.keypath[0],e=this.keypath.substr(1)):("undefined"==typeof(c=this.options.root||a.root)&&d("Must define a default root adapter."),e=this.keypath),this.tokens=b.tokenize(e,f,c),this.key=this.tokens.pop()},b.prototype.realize=function(){var a,b=this.obj,d=!1;return this.tokens.forEach(function(e,f){c(b)?("undefined"!=typeof this.objectPath[f]?b!==(a=this.objectPath[f])&&(this.set(!1,e,a,this.update.bind(this)),this.set(!0,e,b,this.update.bind(this)),this.objectPath[f]=b):(this.set(!0,e,b,this.update.bind(this)),this.objectPath[f]=b),b=this.get(e,b)):(d===!1&&(d=f),(a=this.objectPath[f])&&this.set(!1,e,a,this.update.bind(this)))},this),d!==!1&&this.objectPath.splice(d),b},b.prototype.update=function(){var a,b;(a=this.realize())!==this.target&&(c(this.target)&&this.set(!1,this.key,this.target,this.callback),c(a)&&this.set(!0,this.key,a,this.callback),b=this.value(),this.target=a,this.value()!==b&&this.callback())},b.prototype.value=function(){return c(this.target)?this.get(this.key,this.target):void 0},b.prototype.setValue=function(a){c(this.target)&&this.adapter(this.key).set(this.target,this.key.path,a)},b.prototype.get=function(a,b){return this.adapter(a).get(b,a.path)},b.prototype.set=function(a,b,c,d){var e=a?"observe":"unobserve";this.adapter(b)[e](c,b.path,d)},b.prototype.interfaces=function(){var b=Object.keys(this.options.adapters);return Object.keys(a.adapters).forEach(function(a){~b.indexOf(a)||b.push(a)}),b},b.prototype.adapter=function(b){return this.options.adapters[b.i]||a.adapters[b.i]},b.prototype.unobserve=function(){var a;this.tokens.forEach(function(b,c){(a=this.objectPath[c])&&this.set(!1,b,a,this.update.bind(this))},this),c(this.target)&&this.set(!1,this.key,this.target,this.callback)},"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define([],function(){return this.sightglass=a}):this.sightglass=a}).call(this),function(){var a,b,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f=[].slice,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a={options:["prefix","templateDelimiters","rootInterface","preloadData","handler"],extensions:["binders","formatters","components","adapters"],"public":{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(a,b,c){return this.call(a,b,c.view.models)},configure:function(b){var c,d,e,f;null==b&&(b={});for(e in b)if(f=b[e],"binders"===e||"components"===e||"formatters"===e||"adapters"===e)for(d in f)c=f[d],a[e][d]=c;else a["public"][e]=f},bind:function(b,c,d){var e;return null==c&&(c={}),null==d&&(d={}),e=new a.View(b,c,d),e.bind(),e},init:function(b,c,d){var e,f;return null==d&&(d={}),null==c&&(c=document.createElement("div")),b=a["public"].components[b],c.innerHTML=b.template.call(this,c),e=b.initialize.call(this,c,d),f=new a.View(c,e),f.bind(),f}}},window.jQuery||window.$?(d="on"in jQuery.prototype?["on","off"]:["bind","unbind"],b=d[0],c=d[1],a.Util={bindEvent:function(a,c,d){return jQuery(a)[b](c,d)},unbindEvent:function(a,b,d){return jQuery(a)[c](b,d)},getInputValue:function(a){var b;return b=jQuery(a),"checkbox"===b.attr("type")?b.is(":checked"):b.val()}}):a.Util={bindEvent:function(){return"addEventListener"in window?function(a,b,c){return a.addEventListener(b,c,!1)}:function(a,b,c){return a.attachEvent("on"+b,c)}}(),unbindEvent:function(){return"removeEventListener"in window?function(a,b,c){return a.removeEventListener(b,c,!1)}:function(a,b,c){return a.detachEvent("on"+b,c)}}(),getInputValue:function(a){var b,c,d,e;if("checkbox"===a.type)return a.checked;if("select-multiple"===a.type){for(e=[],c=0,d=a.length;d>c;c++)b=a[c],b.selected&&e.push(b.value);return e}return a.value}},a.TypeParser=function(){function a(){}return a.types={primitive:0,keypath:1},a.parse=function(a){return/^'.*'$|^".*"$/.test(a)?{type:this.types.primitive,value:a.slice(1,-1)}:"true"===a?{type:this.types.primitive,value:!0}:"false"===a?{type:this.types.primitive,value:!1}:"null"===a?{type:this.types.primitive,value:null}:"undefined"===a?{type:this.types.primitive,value:void 0}:isNaN(Number(a))===!1?{type:this.types.primitive,value:Number(a)}:{type:this.types.keypath,value:a}},a}(),a.TextTemplateParser=function(){function a(){}return a.types={text:0,binding:1},a.parse=function(a,b){var c,d,e,f,g,h,i;for(h=[],f=a.length,c=0,d=0;f>d;){if(c=a.indexOf(b[0],d),0>c){h.push({type:this.types.text,value:a.slice(d)});break}if(c>0&&c>d&&h.push({type:this.types.text,value:a.slice(d,c)}),d=c+b[0].length,c=a.indexOf(b[1],d),0>c){g=a.slice(d-b[1].length),e=h[h.length-1],(null!=e?e.type:void 0)===this.types.text?e.value+=g:h.push({type:this.types.text,value:g});break}i=a.slice(d,c).trim(),h.push({type:this.types.binding,value:i}),d=c+b[1].length}return h},a}(),a.View=function(){function b(b,c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r;for(this.els=b,this.models=c,null==d&&(d={}),this.update=e(this.update,this),this.publish=e(this.publish,this),this.sync=e(this.sync,this),this.unbind=e(this.unbind,this),this.bind=e(this.bind,this),this.select=e(this.select,this),this.traverse=e(this.traverse,this),this.build=e(this.build,this),this.buildBinding=e(this.buildBinding,this),this.bindingRegExp=e(this.bindingRegExp,this),this.options=e(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),n=a.extensions,j=0,l=n.length;l>j;j++){if(g=n[j],this[g]={},d[g]){o=d[g];for(f in o)h=o[f],this[g][f]=h}p=a["public"][g];for(f in p)h=p[f],null==(i=this[g])[f]&&(i[f]=h)}for(q=a.options,k=0,m=q.length;m>k;k++)g=q[k],this[g]=null!=(r=d[g])?r:a["public"][g];this.build()}return b.prototype.options=function(){var b,c,d,e,f;for(c={},f=a.extensions.concat(a.options),d=0,e=f.length;e>d;d++)b=f[d],c[b]=this[b];return c},b.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},b.prototype.buildBinding=function(b,c,d,e){var f,g,h,i,j,k,l;return j={},l=function(){var a,b,c,d;for(c=e.split("|"),d=[],a=0,b=c.length;b>a;a++)k=c[a],d.push(k.trim());return d}(),f=function(){var a,b,c,d;for(c=l.shift().split("<"),d=[],a=0,b=c.length;b>a;a++)g=c[a],d.push(g.trim());return d}(),i=f.shift(),j.formatters=l,(h=f.shift())&&(j.dependencies=h.split(/\s+/)),this.bindings.push(new a[b](this,c,d,i,j))},b.prototype.build=function(){var b,c,d,e,f;for(this.bindings=[],c=function(b){return function(d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(3===d.nodeType){if(i=a.TextTemplateParser,(g=b.templateDelimiters)&&(l=i.parse(d.data,g)).length&&(1!==l.length||l[0].type!==i.types.text)){for(m=0,o=l.length;o>m;m++)k=l[m],j=document.createTextNode(k.value),d.parentNode.insertBefore(j,d),1===k.type&&b.buildBinding("TextBinding",j,null,k.value);d.parentNode.removeChild(d)}}else 1===d.nodeType&&(e=b.traverse(d));if(!e){for(q=function(){var a,b,c,e;for(c=d.childNodes,e=[],a=0,b=c.length;b>a;a++)h=c[a],e.push(h);return e}(),r=[],n=0,p=q.length;p>n;n++)f=q[n],r.push(c(f));return r}}}(this),f=this.els,d=0,e=f.length;e>d;d++)b=f[d],c(b);this.bindings.sort(function(a,b){var c,d;return((null!=(c=b.binder)?c.priority:void 0)||0)-((null!=(d=a.binder)?d.priority:void 0)||0)})},b.prototype.traverse=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(f=this.bindingRegExp(),g="SCRIPT"===b.nodeName||"STYLE"===b.nodeName,p=b.attributes,l=0,n=p.length;n>l;l++)if(c=p[l],f.test(c.name)){if(j=c.name.replace(f,""),!(e=this.binders[j])){q=this.binders;for(h in q)k=q[h],"*"!==h&&-1!==h.indexOf("*")&&(i=new RegExp("^"+h.replace(/\*/g,".+")+"$"),i.test(j)&&(e=k))}e||(e=this.binders["*"]),e.block&&(g=!0,d=[c])}for(r=d||b.attributes,m=0,o=r.length;o>m;m++)c=r[m],f.test(c.name)&&(j=c.name.replace(f,""),this.buildBinding("Binding",b,j,c.value));return g||(j=b.nodeName.toLowerCase(),this.components[j]&&!b._bound&&(this.bindings.push(new a.ComponentBinding(this,b,j)),g=!0)),g},b.prototype.select=function(a){var b,c,d,e,f;for(e=this.bindings,f=[],c=0,d=e.length;d>c;c++)b=e[c],a(b)&&f.push(b);return f},b.prototype.bind=function(){var a,b,c,d,e;for(d=this.bindings,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.bind());return e},b.prototype.unbind=function(){var a,b,c,d,e;for(d=this.bindings,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.unbind());return e},b.prototype.sync=function(){var a,b,c,d,e;for(d=this.bindings,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push("function"==typeof a.sync?a.sync():void 0);return e},b.prototype.publish=function(){var a,b,c,d,e;for(d=this.select(function(a){var b;return null!=(b=a.binder)?b.publishes:void 0}),e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.publish());return e},b.prototype.update=function(a){var b,c,d,e,f,g,h;null==a&&(a={});for(c in a)d=a[c],this.models[c]=d;for(g=this.bindings,h=[],e=0,f=g.length;f>e;e++)b=g[e],h.push("function"==typeof b.update?b.update(a):void 0);return h},b}(),a.Binding=function(){function b(a,b,c,d,f){this.view=a,this.el=b,this.type=c,this.keypath=d,this.options=null!=f?f:{},this.getValue=e(this.getValue,this),this.update=e(this.update,this),this.unbind=e(this.unbind,this),this.bind=e(this.bind,this),this.publish=e(this.publish,this),this.sync=e(this.sync,this),this.set=e(this.set,this),this.eventHandler=e(this.eventHandler,this),this.formattedValue=e(this.formattedValue,this),this.parseTarget=e(this.parseTarget,this),this.observe=e(this.observe,this),this.setBinder=e(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return b.prototype.setBinder=function(){var a,b,c,d;if(!(this.binder=this.view.binders[this.type])){d=this.view.binders;for(a in d)c=d[a],"*"!==a&&-1!==a.indexOf("*")&&(b=new RegExp("^"+a.replace(/\*/g,".+")+"$"),b.test(this.type)&&(this.binder=c,this.args=new RegExp("^"+a.replace(/\*/g,"(.+)")+"$").exec(this.type),this.args.shift()))}return this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function?this.binder={routine:this.binder}:void 0},b.prototype.observe=function(b,c,d){return a.sightglass(b,c,d,{root:this.view.rootInterface,adapters:this.view.adapters})},b.prototype.parseTarget=function(){var b;return b=a.TypeParser.parse(this.keypath),0===b.type?this.value=b.value:(this.observer=this.observe(this.view.models,this.keypath,this.sync),this.model=this.observer.target)},b.prototype.formattedValue=function(b){var c,d,e,g,h,i,j,k,l,m,n,o,p,q;for(q=this.formatters,g=m=0,o=q.length;o>m;g=++m){for(h=q[g],e=h.match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g),i=e.shift(),h=this.view.formatters[i],e=function(){var b,c,f;for(f=[],b=0,c=e.length;c>b;b++)d=e[b],f.push(a.TypeParser.parse(d));return f}(),k=[],c=n=0,p=e.length;p>n;c=++n)d=e[c],k.push(0===d.type?d.value:((l=this.formatterObservers)[g]||(l[g]={}),(j=this.formatterObservers[g][c])?void 0:(j=this.observe(this.view.models,d.value,this.sync),this.formatterObservers[g][c]=j),j.value()));(null!=h?h.read:void 0)instanceof Function?b=h.read.apply(h,[b].concat(f.call(k))):h instanceof Function&&(b=h.apply(null,[b].concat(f.call(k))))}return b},b.prototype.eventHandler=function(a){var b,c;return c=(b=this).view.handler,function(d){return c.call(a,this,d,b)}},b.prototype.set=function(a){var b;return a=this.formattedValue(a instanceof Function&&!this.binder["function"]?a.call(this.model):a),null!=(b=this.binder.routine)?b.call(this,this.el,a):void 0},b.prototype.sync=function(){var a,b;return this.set(function(){var c,d,e,f,g,h,i;if(this.observer){if(this.model!==this.observer.target){for(g=this.dependencies,c=0,e=g.length;e>c;c++)b=g[c],b.unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(h=this.options.dependencies)?h.length:void 0))for(i=this.options.dependencies,d=0,f=i.length;f>d;d++)a=i[d],b=this.observe(this.model,a,this.sync),this.dependencies.push(b)}return this.observer.value()}return this.value}.call(this))},b.prototype.publish=function(){var a,b,c,d,e,g,h,i,j;if(this.observer){for(d=this.getValue(this.el),h=this.formatters.slice(0).reverse(),e=0,g=h.length;g>e;e++)b=h[e],a=b.split(/\s+/),c=a.shift(),(null!=(i=this.view.formatters[c])?i.publish:void 0)&&(d=(j=this.view.formatters[c]).publish.apply(j,[d].concat(f.call(a))));return this.observer.setValue(d)}},b.prototype.bind=function(){var a,b,c,d,e,f,g;if(this.parseTarget(),null!=(e=this.binder.bind)&&e.call(this,this.el),null!=this.model&&(null!=(f=this.options.dependencies)?f.length:void 0))for(g=this.options.dependencies,c=0,d=g.length;d>c;c++)a=g[c],b=this.observe(this.model,a,this.sync),this.dependencies.push(b);return this.view.preloadData?this.sync():void 0},b.prototype.unbind=function(){var a,b,c,d,e,f,g,h,i,j;for(null!=(g=this.binder.unbind)&&g.call(this,this.el),null!=(h=this.observer)&&h.unobserve(),i=this.dependencies,e=0,f=i.length;f>e;e++)d=i[e],d.unobserve();this.dependencies=[],j=this.formatterObservers;for(c in j){b=j[c];for(a in b)d=b[a],d.unobserve()}return this.formatterObservers={}},b.prototype.update=function(a){var b,c;return null==a&&(a={}),this.model=null!=(b=this.observer)?b.target:void 0,null!=(c=this.binder.update)?c.call(this,a):void 0},b.prototype.getValue=function(b){return this.binder&&null!=this.binder.getValue?this.binder.getValue.call(this,b):a.Util.getInputValue(b)},b}(),a.ComponentBinding=function(b){function c(a,b,c){var d,f,g,h,j,k,l;for(this.view=a,this.el=b,this.type=c,this.unbind=e(this.unbind,this),this.bind=e(this.bind,this),this.locals=e(this.locals,this),this.component=this.view.components[this.type],this["static"]={},this.observers={},this.upstreamObservers={},f=a.bindingRegExp(),k=this.el.attributes||[],h=0,j=k.length;j>h;h++)d=k[h],f.test(d.name)||(g=this.camelCase(d.name),i.call(null!=(l=this.component["static"])?l:[],g)>=0?this["static"][g]=d.value:this.observers[g]=d.value)}return h(c,b),c.prototype.sync=function(){},c.prototype.update=function(){},c.prototype.publish=function(){},c.prototype.locals=function(){var a,b,c,d,e,f;c={},e=this["static"];for(a in e)d=e[a],c[a]=d;f=this.observers;for(a in f)b=f[a],c[a]=b.value();return c},c.prototype.camelCase=function(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},c.prototype.bind=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(!this.bound){o=this.observers;for(c in o)d=o[c],this.observers[c]=this.observe(this.view.models,d,function(a){return function(b){return function(){return a.componentView.models[b]=a.observers[b].value()}}}(this).call(this,c));this.bound=!0}if(null!=this.componentView)return this.componentView.bind();for(this.el.innerHTML=this.component.template.call(this),h=this.component.initialize.call(this,this.el,this.locals()),this.el._bound=!0,g={},p=a.extensions,k=0,m=p.length;m>k;k++){if(f=p[k],g[f]={},this.component[f]){q=this.component[f];for(b in q)i=q[b],g[f][b]=i}r=this.view[f];for(b in r)i=r[b],null==(j=g[f])[b]&&(j[b]=i)}for(s=a.options,l=0,n=s.length;n>l;l++)f=s[l],g[f]=null!=(t=this.component[f])?t:this.view[f];this.componentView=new a.View(this.el,h,g),this.componentView.bind(),u=this.observers,v=[];for(c in u)e=u[c],v.push(this.upstreamObservers[c]=this.observe(this.componentView.models,c,function(a){return function(b,c){return function(){return c.setValue(a.componentView.models[b])}}}(this).call(this,c,e)));return v},c.prototype.unbind=function(){var a,b,c,d,e;c=this.upstreamObservers;for(a in c)b=c[a],b.unobserve();d=this.observers;for(a in d)b=d[a],b.unobserve();return null!=(e=this.componentView)?e.unbind.call(this):void 0},c}(a.Binding),a.TextBinding=function(a){function b(a,b,c,d,f){this.view=a,this.el=b,this.type=c,this.keypath=d,this.options=null!=f?f:{},this.sync=e(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return h(b,a),b.prototype.binder={routine:function(a,b){return a.data=null!=b?b:""}},b.prototype.sync=function(){return b.__super__.sync.apply(this,arguments)},b}(a.Binding),a["public"].binders.text=function(a,b){return null!=a.textContent?a.textContent=null!=b?b:"":a.innerText=null!=b?b:""},a["public"].binders.html=function(a,b){return a.innerHTML=null!=b?b:""},a["public"].binders.show=function(a,b){return a.style.display=b?"":"none"},a["public"].binders.hide=function(a,b){return a.style.display=b?"none":""},a["public"].binders.enabled=function(a,b){return a.disabled=!b},a["public"].binders.disabled=function(a,b){return a.disabled=!!b},a["public"].binders.checked={publishes:!0,priority:2e3,bind:function(b){return a.Util.bindEvent(b,"change",this.publish)},unbind:function(b){return a.Util.unbindEvent(b,"change",this.publish)},routine:function(a,b){var c;return a.checked="radio"===a.type?(null!=(c=a.value)?c.toString():void 0)===(null!=b?b.toString():void 0):!!b}},a["public"].binders.unchecked={publishes:!0,priority:2e3,bind:function(b){return a.Util.bindEvent(b,"change",this.publish)},unbind:function(b){return a.Util.unbindEvent(b,"change",this.publish)},routine:function(a,b){var c;return a.checked="radio"===a.type?(null!=(c=a.value)?c.toString():void 0)!==(null!=b?b.toString():void 0):!b}},a["public"].binders.value={publishes:!0,priority:3e3,bind:function(b){return"INPUT"!==b.tagName||"radio"!==b.type?(this.event="SELECT"===b.tagName?"change":"input",a.Util.bindEvent(b,this.event,this.publish)):void 0},unbind:function(b){return"INPUT"!==b.tagName||"radio"!==b.type?a.Util.unbindEvent(b,this.event,this.publish):void 0},routine:function(a,b){var c,d,e,f,g,h,j;if("INPUT"===a.tagName&&"radio"===a.type)return a.setAttribute("value",b);if(null!=window.jQuery){if(a=jQuery(a),(null!=b?b.toString():void 0)!==(null!=(f=a.val())?f.toString():void 0))return a.val(null!=b?b:"")}else if("select-multiple"===a.type){if(null!=b){for(j=[],d=0,e=a.length;e>d;d++)c=a[d],j.push(c.selected=(g=c.value,i.call(b,g)>=0));return j}}else if((null!=b?b.toString():void 0)!==(null!=(h=a.value)?h.toString():void 0))return a.value=null!=b?b:""}},a["public"].binders["if"]={block:!0,priority:4e3,bind:function(a){var b,c;return null==this.marker?(b=[this.view.prefix,this.type].join("-").replace("--","-"),c=a.getAttribute(b),this.marker=document.createComment(" rivets: "+this.type+" "+c+" "),this.bound=!1,a.removeAttribute(b),a.parentNode.insertBefore(this.marker,a),a.parentNode.removeChild(a)):void 0},unbind:function(){var a;return null!=(a=this.nested)?a.unbind():void 0},routine:function(b,c){var d,e,f,g;if(!!c==!this.bound){if(c){f={},g=this.view.models;for(d in g)e=g[d],f[d]=e;return(this.nested||(this.nested=new a.View(b,f,this.view.options()))).bind(),this.marker.parentNode.insertBefore(b,this.marker.nextSibling),this.bound=!0}return b.parentNode.removeChild(b),this.nested.unbind(),this.bound=!1}},update:function(a){var b;return null!=(b=this.nested)?b.update(a):void 0}},a["public"].binders.unless={block:!0,priority:4e3,bind:function(b){return a["public"].binders["if"].bind.call(this,b)},unbind:function(){return a["public"].binders["if"].unbind.call(this)},routine:function(b,c){return a["public"].binders["if"].routine.call(this,b,!c)},update:function(b){return a["public"].binders["if"].update.call(this,b)}},a["public"].binders["on-*"]={"function":!0,priority:1e3,unbind:function(b){return this.handler?a.Util.unbindEvent(b,this.args[0],this.handler):void 0},routine:function(b,c){return this.handler&&a.Util.unbindEvent(b,this.args[0],this.handler),a.Util.bindEvent(b,this.args[0],this.handler=this.eventHandler(c))}},a["public"].binders["each-*"]={block:!0,priority:4e3,bind:function(a){var b,c,d,e,f;if(null==this.marker)b=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],a.removeAttribute(b),a.parentNode.insertBefore(this.marker,a),a.parentNode.removeChild(a);else for(f=this.iterated,d=0,e=f.length;e>d;d++)c=f[d],c.bind()},unbind:function(){var a,b,c,d,e;if(null!=this.iterated){for(d=this.iterated,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.unbind());return e}},routine:function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(j=this.args[0],c=c||[],this.iterated.length>c.length)for(u=Array(this.iterated.length-c.length),o=0,r=u.length;r>o;o++)f=u[o],n=this.iterated.pop(),n.unbind(),this.marker.parentNode.removeChild(n.els[0]);for(g=p=0,s=c.length;s>p;g=++p)if(i=c[g],e={index:g},e[j]=i,null==this.iterated[g]){v=this.view.models;for(h in v)i=v[h],null==e[h]&&(e[h]=i);l=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,k=this.view.options(),k.preloadData=!0,m=b.cloneNode(!0),n=new a.View(m,e,k),n.bind(),this.iterated.push(n),this.marker.parentNode.insertBefore(m,l.nextSibling)}else this.iterated[g].models[j]!==i&&this.iterated[g].update(e);if("OPTION"===b.nodeName){for(w=this.view.bindings,x=[],q=0,t=w.length;t>q;q++)d=w[q],x.push(d.el===this.marker.parentNode&&"value"===d.type?d.sync():void 0);return x}},update:function(a){var b,c,d,e,f,g,h,i;b={};for(c in a)d=a[c],c!==this.args[0]&&(b[c]=d);for(h=this.iterated,i=[],f=0,g=h.length;g>f;f++)e=h[f],i.push(e.update(b));return i}},a["public"].binders["class-*"]=function(a,b){var c;return c=" "+a.className+" ",!b==(-1!==c.indexOf(" "+this.args[0]+" "))?a.className=b?""+a.className+" "+this.args[0]:c.replace(" "+this.args[0]+" "," ").trim():void 0},a["public"].binders["*"]=function(a,b){return null!=b?a.setAttribute(this.type,b):a.removeAttribute(this.type)},a["public"].adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(a){var b,c,d;return a.hasOwnProperty(this.id)||(b=this.counter++,Object.defineProperty(a,this.id,{value:b})),(c=this.weakmap)[d=a[this.id]]||(c[d]={callbacks:{}})},cleanupWeakReference:function(a,b){return Object.keys(a.callbacks).length||a.pointers&&Object.keys(a.pointers).length?void 0:delete this.weakmap[b]},stubFunction:function(a,b){var c,d,e;return d=a[b],c=this.weakReference(a),e=this.weakmap,a[b]=function(){var b,f,g,h,i,j,k,l,m,n;h=d.apply(a,arguments),k=c.pointers;for(g in k)for(f=k[g],n=null!=(l=null!=(m=e[g])?m.callbacks[f]:void 0)?l:[],i=0,j=n.length;j>i;i++)(b=n[i])();return h}},observeMutations:function(a,b,c){var d,e,f,g,h,j;if(Array.isArray(a)){if(f=this.weakReference(a),null==f.pointers)for(f.pointers={},e=["push","pop","shift","unshift","sort","reverse","splice"],h=0,j=e.length;j>h;h++)d=e[h],this.stubFunction(a,d);if(null==(g=f.pointers)[b]&&(g[b]=[]),i.call(f.pointers[b],c)<0)return f.pointers[b].push(c)}},unobserveMutations:function(a,b,c){
var d,e,f;return Array.isArray(a)&&null!=a[this.id]&&(e=this.weakmap[a[this.id]])&&(f=e.pointers[b])?((d=f.indexOf(c))>=0&&f.splice(d,1),f.length||delete e.pointers[b],this.cleanupWeakReference(e,a[this.id])):void 0},observe:function(a,b,c){var d,e,f;return d=this.weakReference(a).callbacks,null==d[b]&&(d[b]=[],e=Object.getOwnPropertyDescriptor(a,b),(null!=e?e.get:void 0)||(null!=e?e.set:void 0)||(f=a[b],Object.defineProperty(a,b,{enumerable:!0,get:function(){return f},set:function(e){return function(g){var h,j,k,l;if(g!==f&&(e.unobserveMutations(f,a[e.id],b),f=g,h=e.weakmap[a[e.id]])){if(d=h.callbacks,d[b])for(l=d[b].slice(),j=0,k=l.length;k>j;j++)c=l[j],i.call(d[b],c)>=0&&c();return e.observeMutations(g,a[e.id],b)}}}(this)}))),i.call(d[b],c)<0&&d[b].push(c),this.observeMutations(a[b],a[this.id],b)},unobserve:function(a,b,c){var d,e,f;return(f=this.weakmap[a[this.id]])&&(d=f.callbacks[b])?((e=d.indexOf(c))>=0&&(d.splice(e,1),d.length||delete f.callbacks[b]),this.unobserveMutations(a[b],a[this.id],b),this.cleanupWeakReference(f,a[this.id])):void 0},get:function(a,b){return a[b]},set:function(a,b,c){return a[b]=c}},a.factory=function(b){return a.sightglass=b,a["public"]._=a,a["public"]},"object"==typeof("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=a.factory(require("sightglass")):"function"==typeof define&&define.amd?define(["sightglass"],function(b){return this.rivets=a.factory(b)}):this.rivets=a.factory(sightglass)}.call(this),function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){"use strict";function a(a){var b=[];for(var c in a)b.push(c);return b}var b,c=function(a){try{a()}catch(b){return!1}return!0},d=function(a,b){try{var c=function(){a.apply(this,arguments)};return c.__proto__?(Object.setPrototypeOf(c,a),c.prototype=Object.create(a.prototype,{constructor:{value:a}}),b(c)):!1}catch(d){return!1}},e=function(){try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}},f=function(){var a=!1;if(String.prototype.startsWith)try{"/a/".startsWith(/a/)}catch(b){a=!0}return a},g=function(){return String.prototype.startsWith&&"abc".startsWith("a",1/0)===!1}(),h=new Function("return this;"),i=h(),j=i.isFinite,k=!!Object.defineProperty&&e(),l=f()&&g,m=Function.call.bind(String.prototype.indexOf),n=Function.call.bind(Object.prototype.toString),o=Function.call.bind(Object.prototype.hasOwnProperty),p=function(){},q=i.Symbol||{},r=q.species||"@@species",s={object:function(a){return null!==a&&"object"==typeof a},string:function(a){return"[object String]"===n(a)},regex:function(a){return"[object RegExp]"===n(a)},symbol:function(a){return"function"==typeof i.Symbol&&"symbol"==typeof a}},t=Number.isNaN||function(a){return a!==a},u=Number.isFinite||function(a){return"number"==typeof a&&j(a)},v=function(a,b,c,d){!d&&b in a||(k?Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:c}):a[b]=c)},w={getter:function(a,b,c){if(!k)throw new TypeError("getters require true ES5 support");Object.defineProperty(a,b,{configurable:!0,enumerable:!1,get:c})},proxy:function(a,b,c){if(!k)throw new TypeError("getters require true ES5 support");var d=Object.getOwnPropertyDescriptor(a,b);Object.defineProperty(c,b,{configurable:d.configurable,enumerable:d.enumerable,get:function(){return a[b]},set:function(c){a[b]=c}})},redefine:function(a,b,c){if(k){var d=Object.getOwnPropertyDescriptor(a,b);d.value=c,Object.defineProperty(a,b,d)}else a[b]=c},preserveToString:function(a,b){v(a,"toString",b.toString.bind(b),!0)}},x=function(a,b){Object.keys(b).forEach(function(c){var d=b[c];v(a,c,d,!1)})},y=Object.create||function(a,b){function c(){}c.prototype=a;var d=new c;return"undefined"!=typeof b&&x(d,b),d},z=s.symbol(q.iterator)?q.iterator:"_es6-shim iterator_";i.Set&&"function"==typeof(new i.Set)["@@iterator"]&&(z="@@iterator");var A=function(a,b){b||(b=function(){return this});var c={};c[z]=b,x(a,c),!a[z]&&s.symbol(z)&&(a[z]=b)},B=function(a){var b=n(a),c="[object Arguments]"===b;return c||(c="[object Array]"!==b&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&"[object Function]"===n(a.callee)),c},C=Function.call.bind(Function.apply),D={Call:function(a,b){var c=arguments.length>2?arguments[2]:[];if(!D.IsCallable(a))throw new TypeError(a+" is not a function");return C(a,b,c)},RequireObjectCoercible:function(a,b){if(null==a)throw new TypeError(b||"Cannot call method on "+a)},TypeIsObject:function(a){return null!=a&&Object(a)===a},ToObject:function(a,b){return D.RequireObjectCoercible(a,b),Object(a)},IsCallable:function(a){return"function"==typeof a&&"[object Function]"===n(a)},ToInt32:function(a){return D.ToNumber(a)>>0},ToUint32:function(a){return D.ToNumber(a)>>>0},ToNumber:function(a){if("[object Symbol]"===n(a))throw new TypeError("Cannot convert a Symbol value to a number");return+a},ToInteger:function(a){var b=D.ToNumber(a);return t(b)?0:0!==b&&u(b)?(b>0?1:-1)*Math.floor(Math.abs(b)):b},ToLength:function(a){var b=D.ToInteger(a);return 0>=b?0:b>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:b},SameValue:function(a,b){return a===b?0===a?1/a===1/b:!0:t(a)&&t(b)},SameValueZero:function(a,b){return a===b||t(a)&&t(b)},IsIterable:function(a){return D.TypeIsObject(a)&&("undefined"!=typeof a[z]||B(a))},GetIterator:function(a){if(B(a))return new b(a,"value");var c=a[z];if(!D.IsCallable(c))throw new TypeError("value is not an iterable");var d=c.call(a);if(!D.TypeIsObject(d))throw new TypeError("bad iterator");return d},IteratorNext:function(a){var b=arguments.length>1?a.next(arguments[1]):a.next();if(!D.TypeIsObject(b))throw new TypeError("bad iterator");return b},Construct:function(a,b){var c;c=D.IsCallable(a[r])?a[r]():y(a.prototype||null),x(c,{_es6construct:!0});var d=D.Call(a,c,b);return D.TypeIsObject(d)?d:c},CreateHTML:function(a,b,c,d){var e=String(a),f="<"+b;if(""!==c){var g=String(d),h=g.replace(/"/g,"&quot;");f+=" "+c+'="'+h+'"'}var i=f+">",j=i+e;return j+"</"+b+">"}},E=function(a){if(!D.TypeIsObject(a))throw new TypeError("bad object");return a._es6construct||(a.constructor&&D.IsCallable(a.constructor[r])&&(a=a.constructor[r](a)),x(a,{_es6construct:!0})),a},F=function(){function a(a){var b=Math.floor(a),c=a-b;return.5>c?b:c>.5?b+1:b%2?b+1:b}function b(b,c,d){var e,f,g,h,i,j,k,l=(1<<c-1)-1;for(b!==b?(f=(1<<c)-1,g=Math.pow(2,d-1),e=0):b===1/0||b===-(1/0)?(f=(1<<c)-1,g=0,e=0>b?1:0):0===b?(f=0,g=0,e=1/b===-(1/0)?1:0):(e=0>b,b=Math.abs(b),b>=Math.pow(2,1-l)?(f=Math.min(Math.floor(Math.log(b)/Math.LN2),1023),g=a(b/Math.pow(2,f)*Math.pow(2,d)),g/Math.pow(2,d)>=2&&(f+=1,g=1),f>l?(f=(1<<c)-1,g=0):(f+=l,g-=Math.pow(2,d))):(f=0,g=a(b/Math.pow(2,1-l-d)))),i=[],h=d;h;h-=1)i.push(g%2?1:0),g=Math.floor(g/2);for(h=c;h;h-=1)i.push(f%2?1:0),f=Math.floor(f/2);for(i.push(e?1:0),i.reverse(),j=i.join(""),k=[];j.length;)k.push(parseInt(j.slice(0,8),2)),j=j.slice(8);return k}function c(a,b,c){var d,e,f,g,h,i,j,k,l=[];for(d=a.length;d;d-=1)for(f=a[d-1],e=8;e;e-=1)l.push(f%2?1:0),f>>=1;return l.reverse(),g=l.join(""),h=(1<<b-1)-1,i=parseInt(g.slice(0,1),2)?-1:1,j=parseInt(g.slice(1,1+b),2),k=parseInt(g.slice(1+b),2),j===(1<<b)-1?0!==k?0/0:i*(1/0):j>0?i*Math.pow(2,j-h)*(1+k/Math.pow(2,c)):0!==k?i*Math.pow(2,-(h-1))*(k/Math.pow(2,c)):0>i?-0:0}function d(a){return c(a,8,23)}function e(a){return b(a,8,23)}var f={toFloat32:function(a){return d(e(a))}};if("undefined"!=typeof Float32Array){var g=new Float32Array(1);f.toFloat32=function(a){return g[0]=a,g[0]}}return f}();if(x(String,{fromCodePoint:function(a){for(var b,c=[],d=0,e=arguments.length;e>d;d++){if(b=Number(arguments[d]),!D.SameValue(b,D.ToInteger(b))||0>b||b>1114111)throw new RangeError("Invalid code point "+b);65536>b?c.push(String.fromCharCode(b)):(b-=65536,c.push(String.fromCharCode((b>>10)+55296)),c.push(String.fromCharCode(b%1024+56320)))}return c.join("")},raw:function(a){var b=D.ToObject(a,"bad callSite"),c=D.ToObject(b.raw,"bad raw value"),d=c.length,e=D.ToLength(d);if(0>=e)return"";for(var f,g,h,i,j=[],k=0;e>k&&(f=String(k),h=String(c[f]),j.push(h),!(k+1>=e));)g=k+1<arguments.length?arguments[k+1]:"",i=String(g),j.push(i),k++;return j.join("")}}),1!==String.fromCodePoint.length){var G=Function.apply.bind(String.fromCodePoint);v(String,"fromCodePoint",function(a){return G(this,arguments)},!0)}var H=function Wa(a,b){if(1>b)return"";if(b%2)return Wa(a,b-1)+a;var c=Wa(a,b/2);return c+c},I=1/0,J={repeat:function(a){D.RequireObjectCoercible(this);var b=String(this);if(a=D.ToInteger(a),0>a||a>=I)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return H(b,a)},startsWith:function(a){D.RequireObjectCoercible(this);var b=String(this);if(s.regex(a))throw new TypeError('Cannot call method "startsWith" with a regex');a=String(a);var c=arguments.length>1?arguments[1]:void 0,d=Math.max(D.ToInteger(c),0);return b.slice(d,d+a.length)===a},endsWith:function(a){D.RequireObjectCoercible(this);var b=String(this);if(s.regex(a))throw new TypeError('Cannot call method "endsWith" with a regex');a=String(a);var c=b.length,d=arguments.length>1?arguments[1]:void 0,e="undefined"==typeof d?c:D.ToInteger(d),f=Math.min(Math.max(e,0),c);return b.slice(f-a.length,f)===a},includes:function(a){var b=arguments.length>1?arguments[1]:void 0;return-1!==m(this,a,b)},codePointAt:function(a){D.RequireObjectCoercible(this);var b=String(this),c=D.ToInteger(a),d=b.length;if(c>=0&&d>c){var e=b.charCodeAt(c),f=c+1===d;if(55296>e||e>56319||f)return e;var g=b.charCodeAt(c+1);return 56320>g||g>57343?e:1024*(e-55296)+(g-56320)+65536}}};if(x(String.prototype,J),"a".includes("a",1/0)!==!1){var K=String.prototype.includes;v(String.prototype,"includes",J.includes,!0),w.preserveToString(String.prototype.includes,K)}var L=1!=="".trim().length;if(L){delete String.prototype.trim;var M=["	\n\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),N=new RegExp("(^["+M+"]+)|(["+M+"]+$)","g");x(String.prototype,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(N,"")}})}var O=function(a){D.RequireObjectCoercible(a),this._s=String(a),this._i=0};O.prototype.next=function(){var a=this._s,b=this._i;if("undefined"==typeof a||b>=a.length)return this._s=void 0,{value:void 0,done:!0};var c,d,e=a.charCodeAt(b);return 55296>e||e>56319||b+1===a.length?d=1:(c=a.charCodeAt(b+1),d=56320>c||c>57343?1:2),this._i=b+d,{value:a.substr(b,d),done:!1}},A(O.prototype),A(String.prototype,function(){return new O(this)}),l||(v(String.prototype,"startsWith",J.startsWith,!0),v(String.prototype,"endsWith",J.endsWith,!0));var P={from:function(a){var b=arguments.length>1?arguments[1]:void 0,c=D.ToObject(a,"bad iterable");if("undefined"!=typeof b&&!D.IsCallable(b))throw new TypeError("Array.from: when provided, the second argument must be a function");var d,e,f,g,h=arguments.length>2,i=h?arguments[2]:void 0,j=D.IsIterable(c);if(j){f=0,e=D.IsCallable(this)?Object(new this):[];var k,l=j?D.GetIterator(c):null;do k=D.IteratorNext(l),k.done||(g=k.value,e[f]=b?h?b.call(i,g,f):b(g,f):g,f+=1);while(!k.done);d=f}else for(d=D.ToLength(c.length),e=D.IsCallable(this)?Object(new this(d)):new Array(d),f=0;d>f;++f)g=c[f],e[f]=b?h?b.call(i,g,f):b(g,f):g;return e.length=d,e},of:function(){return Array.from.call(this,arguments)}};x(Array,P);var Q=function(a){return{value:a,done:0===arguments.length}};b=function(a,b){this.i=0,this.array=a,this.kind=b},x(b.prototype,{next:function(){var a=this.i,c=this.array;if(!(this instanceof b))throw new TypeError("Not an ArrayIterator");if("undefined"!=typeof c)for(var d=D.ToLength(c.length);d>a;a++){var e,f=this.kind;return"key"===f?e=a:"value"===f?e=c[a]:"entry"===f&&(e=[a,c[a]]),this.i=a+1,{value:e,done:!1}}return this.array=void 0,{value:void 0,done:!0}}}),A(b.prototype);var R=function(a,b){this.object=a,this.array=null,this.kind=b};x(R.prototype,{next:function(){var b,c=this.array;if(!(this instanceof R))throw new TypeError("Not an ObjectIterator");for(null===c&&(c=this.array=a(this.object));D.ToLength(c.length)>0;)if(b=c.shift(),b in this.object)return Q("key"===this.kind?b:"value"===this.kind?this.object[b]:[b,this.object[b]]);return Q()}}),A(R.prototype);var S=function(){var a=function(a){this.length=a};a.prototype=[];var b=Array.of.apply(a,[1,2]);return b instanceof a&&2===b.length}();if(!S){var T=Array.of;v(Array,"of",P.of,!0),w.preserveToString(Array.of,T)}var U={copyWithin:function(a,b){var c=arguments[2],d=D.ToObject(this),e=D.ToLength(d.length);a=D.ToInteger(a),b=D.ToInteger(b);var f=0>a?Math.max(e+a,0):Math.min(a,e),g=0>b?Math.max(e+b,0):Math.min(b,e);c="undefined"==typeof c?e:D.ToInteger(c);var h=0>c?Math.max(e+c,0):Math.min(c,e),i=Math.min(h-g,e-f),j=1;for(f>g&&g+i>f&&(j=-1,g+=i-1,f+=i-1);i>0;)o(d,g)?d[f]=d[g]:delete d[g],g+=j,f+=j,i-=1;return d},fill:function(a){var b=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,d=D.ToObject(this),e=D.ToLength(d.length);b=D.ToInteger("undefined"==typeof b?0:b),c=D.ToInteger("undefined"==typeof c?e:c);for(var f=0>b?Math.max(e+b,0):Math.min(b,e),g=0>c?e+c:c,h=f;e>h&&g>h;++h)d[h]=a;return d},find:function(a){var b=D.ToObject(this),c=D.ToLength(b.length);if(!D.IsCallable(a))throw new TypeError("Array#find: predicate must be a function");for(var d,e=arguments.length>1?arguments[1]:null,f=0;c>f;f++)if(d=b[f],e){if(a.call(e,d,f,b))return d}else if(a(d,f,b))return d},findIndex:function(a){var b=D.ToObject(this),c=D.ToLength(b.length);if(!D.IsCallable(a))throw new TypeError("Array#findIndex: predicate must be a function");for(var d=arguments.length>1?arguments[1]:null,e=0;c>e;e++)if(d){if(a.call(d,b[e],e,b))return e}else if(a(b[e],e,b))return e;return-1},keys:function(){return new b(this,"key")},values:function(){return new b(this,"value")},entries:function(){return new b(this,"entry")}};if(Array.prototype.keys&&!D.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!D.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[z]&&(x(Array.prototype,{values:Array.prototype[z]}),s.symbol(q.unscopables)&&(Array.prototype[q.unscopables].values=!0)),Array.prototype.values&&"values"!==Array.prototype.values.name){var V=Array.prototype.values;v(Array.prototype,"values",function(){return V.call(this)},!0),v(Array.prototype,z,Array.prototype.values,!0),w.preserveToString(Array.prototype.values,V)}x(Array.prototype,U),A(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&A(Object.getPrototypeOf([].values()));var W=function(){try{return 0===Array.from({length:-1}).length}catch(a){return!1}},X=function(){var a=Array.from([0].entries());return 1===a.length&&0===a[0][0]&&1===a[0][1]}();if(!W()||!X){var Y=Array.from;v(Array,"from",P.from,!0),w.preserveToString(Array.from,Y)}var Z=Math.pow(2,53)-1;x(Number,{MAX_SAFE_INTEGER:Z,MIN_SAFE_INTEGER:-Z,EPSILON:2.220446049250313e-16,parseInt:i.parseInt,parseFloat:i.parseFloat,isFinite:u,isInteger:function(a){return u(a)&&D.ToInteger(a)===a},isSafeInteger:function(a){return Number.isInteger(a)&&Math.abs(a)<=Number.MAX_SAFE_INTEGER},isNaN:t}),[,1].find(function(a,b){return 0===b})||v(Array.prototype,"find",U.find,!0),0!==[,1].findIndex(function(a,b){return 0===b})&&v(Array.prototype,"findIndex",U.findIndex,!0),k&&x(Object,{assign:function(a,b){if(!D.TypeIsObject(a))throw new TypeError("target must be an object");return Array.prototype.reduce.call(arguments,function(a,b){return Object.keys(Object(b)).reduce(function(a,c){return a[c]=b[c],a},a)})},is:function(a,b){return D.SameValue(a,b)},setPrototypeOf:function(a,b){var c,d=function(a,b){if(!D.TypeIsObject(a))throw new TypeError("cannot set prototype on a non-object");if(null!==b&&!D.TypeIsObject(b))throw new TypeError("can only set prototype to an object or null"+b)},e=function(a,b){return d(a,b),c.call(a,b),a};try{c=a.getOwnPropertyDescriptor(a.prototype,b).set,c.call({},null)}catch(f){if(a.prototype!=={}[b])return;c=function(a){this[b]=a},e.polyfill=e(e({},null),a.prototype)instanceof a}return e}(Object,"__proto__")}),Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&!function(){var a=Object.create(null),b=Object.getPrototypeOf,c=Object.setPrototypeOf;Object.getPrototypeOf=function(c){var d=b(c);return d===a?null:d},Object.setPrototypeOf=function(b,d){return null===d&&(d=a),c(b,d)},Object.setPrototypeOf.polyfill=!1}();var $=function(){try{return Object.keys("foo"),!0}catch(a){return!1}}();if(!$){var _=Object.keys;v(Object,"keys",function(a){return _(D.ToObject(a))},!0),w.preserveToString(Object.keys,_)}if(Object.getOwnPropertyNames){var aa=function(){try{return Object.getOwnPropertyNames("foo"),!0}catch(a){return!1}}();if(!aa){var ba=Object.getOwnPropertyNames;v(Object,"getOwnPropertyNames",function(a){return ba(D.ToObject(a))},!0),w.preserveToString(Object.getOwnPropertyNames,ba)}}if(Object.getOwnPropertyDescriptor){var ca=function(){try{return Object.getOwnPropertyDescriptor("foo","bar"),!0}catch(a){return!1}}();if(!ca){var da=Object.getOwnPropertyDescriptor;v(Object,"getOwnPropertyDescriptor",function(a,b){return da(D.ToObject(a),b)},!0),w.preserveToString(Object.getOwnPropertyDescriptor,da)}}if(Object.seal){var ea=function(){try{return Object.seal("foo"),!0}catch(a){return!1}}();if(!ea){var fa=Object.seal;v(Object,"seal",function(a){return s.object(a)?fa(a):a},!0),w.preserveToString(Object.seal,fa)}}if(Object.isSealed){var ga=function(){try{return Object.isSealed("foo"),!0}catch(a){return!1}}();if(!ga){var ha=Object.isSealed;v(Object,"isSealed",function(a){return s.object(a)?ha(a):!0},!0),w.preserveToString(Object.isSealed,ha)}}if(Object.freeze){var ia=function(){try{return Object.freeze("foo"),!0}catch(a){return!1}}();if(!ia){var ja=Object.freeze;v(Object,"freeze",function(a){return s.object(a)?ja(a):a},!0),w.preserveToString(Object.freeze,ja)}}if(Object.isFrozen){var ka=function(){try{return Object.isFrozen("foo"),!0}catch(a){return!1}}();if(!ka){var la=Object.isFrozen;v(Object,"isFrozen",function(a){return s.object(a)?la(a):!0},!0),w.preserveToString(Object.isFrozen,la)}}if(Object.preventExtensions){var ma=function(){try{return Object.preventExtensions("foo"),!0}catch(a){return!1}}();if(!ma){var na=Object.preventExtensions;v(Object,"preventExtensions",function(a){return s.object(a)?na(a):a},!0),w.preserveToString(Object.preventExtensions,na)}}if(Object.isExtensible){var oa=function(){try{return Object.isExtensible("foo"),!0}catch(a){return!1}}();if(!oa){var pa=Object.isExtensible;v(Object,"isExtensible",function(a){return s.object(a)?pa(a):!1},!0),w.preserveToString(Object.isExtensible,pa)}}if(Object.getPrototypeOf){var qa=function(){try{return Object.getPrototypeOf("foo"),!0}catch(a){return!1}}();if(!qa){var ra=Object.getPrototypeOf;v(Object,"getPrototypeOf",function(a){return ra(D.ToObject(a))},!0),w.preserveToString(Object.getPrototypeOf,ra)}}if(!RegExp.prototype.flags&&k){var sa=function(){if(!D.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var a="";return this.global&&(a+="g"),this.ignoreCase&&(a+="i"),this.multiline&&(a+="m"),this.unicode&&(a+="u"),this.sticky&&(a+="y"),a};w.getter(RegExp.prototype,"flags",sa)}var ta=function(){try{return"/a/i"===String(new RegExp(/a/g,"i"))}catch(a){return!1}}();if(!ta&&k){var ua=RegExp,va=function Xa(a,b){return s.regex(a)&&s.string(b)?new Xa(a.source,b):new ua(a,b)};w.preserveToString(va,ua),Object.setPrototypeOf&&Object.setPrototypeOf(ua,va),Object.getOwnPropertyNames(ua).forEach(function(a){"$input"!==a&&(a in p||w.proxy(ua,a,va))}),va.prototype=ua.prototype,w.redefine(ua.prototype,"constructor",va),RegExp=va,w.redefine(i,"RegExp",va)}var wa=function(a){return a*a},xa=function(a,b){return a+b},ya={acosh:function(a){var b=Number(a);return Number.isNaN(b)||1>a?0/0:1===b?0:b===1/0?b:Math.log(b/Math.E+Math.sqrt(b+1)*Math.sqrt(b-1)/Math.E)+1},asinh:function(a){return a=Number(a),0!==a&&j(a)?0>a?-Math.asinh(-a):Math.log(a+Math.sqrt(a*a+1)):a},atanh:function(a){return a=Number(a),Number.isNaN(a)||-1>a||a>1?0/0:-1===a?-(1/0):1===a?1/0:0===a?a:.5*Math.log((1+a)/(1-a))},cbrt:function(a){if(a=Number(a),0===a)return a;var b,c=0>a;return c&&(a=-a),b=Math.pow(a,1/3),c?-b:b},clz32:function(a){a=Number(a);var b=D.ToUint32(a);return 0===b?32:32-b.toString(2).length},cosh:function(a){return a=Number(a),0===a?1:Number.isNaN(a)?0/0:j(a)?(0>a&&(a=-a),a>21?Math.exp(a)/2:(Math.exp(a)+Math.exp(-a))/2):1/0},expm1:function(a){var b=Number(a);if(b===-(1/0))return-1;if(!j(b)||0===a)return b;if(Math.abs(b)>.5)return Math.exp(b)-1;for(var c=b,d=0,e=1;d+c!==d;)d+=c,e+=1,c*=b/e;return d},hypot:function(a,b){var c=!1,d=!0,e=!1,f=[];if(Array.prototype.every.call(arguments,function(a){var b=Number(a);return Number.isNaN(b)?c=!0:b===1/0||b===-(1/0)?e=!0:0!==b&&(d=!1),e?!1:(c||f.push(Math.abs(b)),!0)}),e)return 1/0;if(c)return 0/0;if(d)return 0;var g=Math.max.apply(Math,f),h=f.map(function(a){return a/g}),i=h.map(wa).reduce(xa);return g*Math.sqrt(i)},log2:function(a){return Math.log(a)*Math.LOG2E},log10:function(a){return Math.log(a)*Math.LOG10E},log1p:function(a){var b=Number(a);return-1>b||Number.isNaN(b)?0/0:0===b||b===1/0?b:-1===b?-(1/0):1+b-1===0?b:b*(Math.log(1+b)/(1+b-1))},sign:function(a){var b=+a;return 0===b?b:Number.isNaN(b)?b:0>b?-1:1},sinh:function(a){var b=Number(a);return j(a)&&0!==a?Math.abs(b)<1?(Math.expm1(b)-Math.expm1(-b))/2:(Math.exp(b-1)-Math.exp(-b-1))*Math.E/2:a},tanh:function(a){var b=Number(a);if(Number.isNaN(a)||0===b)return b;if(b===1/0)return 1;if(b===-(1/0))return-1;var c=Math.expm1(b),d=Math.expm1(-b);return c===1/0?1:d===1/0?-1:(c-d)/(Math.exp(b)+Math.exp(-b))},trunc:function(a){var b=Number(a);return 0>b?-Math.floor(-b):Math.floor(b)},imul:function(a,b){a=D.ToUint32(a),b=D.ToUint32(b);var c=a>>>16&65535,d=65535&a,e=b>>>16&65535,f=65535&b;return d*f+(c*f+d*e<<16>>>0)|0},fround:function(a){if(0===a||a===1/0||a===-(1/0)||Number.isNaN(a))return a;var b=Number(a);return F.toFloat32(b)}};x(Math,ya),v(Math,"tanh",ya.tanh,-2e-17!==Math.tanh(-2e-17)),v(Math,"acosh",ya.acosh,Math.acosh(Number.MAX_VALUE)===1/0),v(Math,"sinh",ya.sinh,-2e-17!==Math.sinh(-2e-17));var za=Math.expm1(10);v(Math,"expm1",ya.expm1,za>22025.465794806718||22025.465794806718>za);var Aa=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(-.5+Number.EPSILON/3.99),Ba=Math.round;v(Math,"round",function(a){return a>=-.5&&.5>a&&0!==a?Math.sign(0*a):Ba(a)},!Aa),-5!==Math.imul(4294967295,5)&&(Math.imul=ya.imul);var Ca=function(){var a,b;D.IsPromise=function(a){return D.TypeIsObject(a)&&a._promiseConstructor?"undefined"==typeof a._status?!1:!0:!1};var c,d=function(a){if(!D.IsCallable(a))throw new TypeError("bad promise constructor");var b=this,c=function(a,c){b.resolve=a,b.reject=c};if(b.promise=D.Construct(a,[c]),!b.promise._es6construct)throw new TypeError("bad promise constructor");if(!D.IsCallable(b.resolve)||!D.IsCallable(b.reject))throw new TypeError("bad promise constructor")},e=i.setTimeout;"undefined"!=typeof window&&D.IsCallable(window.postMessage)&&(c=function(){var a=[],b="zero-timeout-message",c=function(c){a.push(c),window.postMessage(b,"*")},d=function(c){if(c.source===window&&c.data===b){if(c.stopPropagation(),0===a.length)return;var d=a.shift();d()}};return window.addEventListener("message",d,!0),c});var f=function(){var a=i.Promise;return a&&a.resolve&&function(b){return a.resolve().then(b)}},g=D.IsCallable(i.setImmediate)?i.setImmediate.bind(i):"object"==typeof process&&process.nextTick?process.nextTick:f()||(D.IsCallable(c)?c():function(a){e(a,0)}),h=function(a,b){if(!D.TypeIsObject(a))return!1;var c=b.resolve,d=b.reject;try{var e=a.then;if(!D.IsCallable(e))return!1;e.call(a,c,d)}catch(f){d(f)}return!0},j=function(a,b){a.forEach(function(a){g(function(){var c=a.handler,d=a.capability,e=d.resolve,f=d.reject;try{var g=c(b);if(g===d.promise)throw new TypeError("self resolution");var i=h(g,d);i||e(g)}catch(j){f(j)}})})},k=function(a,b,c){return function(e){if(e===a)return c(new TypeError("self resolution"));var f=a._promiseConstructor,g=new d(f),i=h(e,g);return i?g.promise.then(b,c):b(e)}};a=function(a){var b=this;if(b=E(b),!b._promiseConstructor)throw new TypeError("bad promise");if("undefined"!=typeof b._status)throw new TypeError("promise already initialized");if(!D.IsCallable(a))throw new TypeError("not a valid resolver");b._status="unresolved",b._resolveReactions=[],b._rejectReactions=[];var c=function(a){if("unresolved"===b._status){var c=b._resolveReactions;b._result=a,b._resolveReactions=void 0,b._rejectReactions=void 0,b._status="has-resolution",j(c,a)}},d=function(a){if("unresolved"===b._status){var c=b._rejectReactions;b._result=a,b._resolveReactions=void 0,b._rejectReactions=void 0,b._status="has-rejection",j(c,a)}};try{a(c,d)}catch(e){d(e)}return b},b=a.prototype;var l=function(a,b,c,d){var e=!1;return function(f){if(!e&&(e=!0,b[a]=f,0===--d.count)){var g=c.resolve;g(b)}}};return v(a,r,function(a){var c=this,d=c.prototype||b;return a=a||y(d),x(a,{_status:void 0,_result:void 0,_resolveReactions:void 0,_rejectReactions:void 0,_promiseConstructor:void 0}),a._promiseConstructor=c,a}),x(a,{all:function(a){var b=this,c=new d(b),e=c.resolve,f=c.reject;try{if(!D.IsIterable(a))throw new TypeError("bad iterable");for(var g=D.GetIterator(a),h=[],i={count:1},j=0;;j++){var k=D.IteratorNext(g);if(k.done)break;var m=b.resolve(k.value),n=l(j,h,c,i);i.count++,m.then(n,c.reject)}0===--i.count&&e(h)}catch(o){f(o)}return c.promise},race:function(a){var b=this,c=new d(b),e=c.resolve,f=c.reject;try{if(!D.IsIterable(a))throw new TypeError("bad iterable");for(var g=D.GetIterator(a);;){var h=D.IteratorNext(g);if(h.done)break;var i=b.resolve(h.value);i.then(e,f)}}catch(j){f(j)}return c.promise},reject:function(a){var b=this,c=new d(b),e=c.reject;return e(a),c.promise},resolve:function(a){var b=this;if(D.IsPromise(a)){var c=a._promiseConstructor;if(c===b)return a}var e=new d(b),f=e.resolve;return f(a),e.promise}}),x(b,{"catch":function(a){return this.then(void 0,a)},then:function(a,b){var c=this;if(!D.IsPromise(c))throw new TypeError("not a promise");var e=this.constructor,f=new d(e);D.IsCallable(b)||(b=function(a){throw a}),D.IsCallable(a)||(a=function(a){return a});var g=k(c,a,b),h={capability:f,handler:g},i={capability:f,handler:b};switch(c._status){case"unresolved":c._resolveReactions.push(h),c._rejectReactions.push(i);break;case"has-resolution":j([h],c._result);break;case"has-rejection":j([i],c._result);break;default:throw new TypeError("unexpected")}return f.promise}}),a}();i.Promise&&(delete i.Promise.accept,delete i.Promise.defer,delete i.Promise.prototype.chain),x(i,{Promise:Ca});var Da=d(i.Promise,function(a){return a.resolve(42)instanceof a}),Ea=function(){try{return i.Promise.reject(42).then(null,5).then(null,p),!0}catch(a){return!1}}(),Fa=function(){try{Promise.call(3,p)}catch(a){return!0}return!1}();Da&&Ea&&Fa||(Promise=Ca,v(i,"Promise",Ca,!0));var Ga=function(a){var b=Object.keys(a.reduce(function(a,b){return a[b]=!0,a},{}));return a.join(":")===b.join(":")},Ha=Ga(["z","a","bb"]),Ia=Ga(["z",1,"a","3",2]);if(k){var Ja=function(a){if(!Ha)return null;var b=typeof a;return"string"===b?"$"+a:"number"===b?Ia?a:"n"+a:null},Ka=function(){return Object.create?Object.create(null):{}},La={Map:function(){function a(a,b){this.key=a,this.value=b,this.next=null,this.prev=null}function b(a,b){this.head=a._head,this.i=this.head,this.kind=b}function c(b){var c=this;if(!D.TypeIsObject(c))throw new TypeError("Constructor Map requires 'new'");if(c=E(c),!c._es6map)throw new TypeError("bad map");var d=new a(null,null);if(d.next=d.prev=d,x(c,{_head:d,_storage:Ka(),_size:0}),"undefined"!=typeof b&&null!==b){var e=D.GetIterator(b),f=c.set;if(!D.IsCallable(f))throw new TypeError("bad map");for(;;){var g=D.IteratorNext(e);if(g.done)break;var h=g.value;if(!D.TypeIsObject(h))throw new TypeError("expected iterable of pairs");f.call(c,h[0],h[1])}}return c}var d={};a.prototype.isRemoved=function(){return this.key===d},b.prototype={next:function(){var a,b=this.i,c=this.kind,d=this.head;if("undefined"==typeof this.i)return{value:void 0,done:!0};for(;b.isRemoved()&&b!==d;)b=b.prev;for(;b.next!==d;)if(b=b.next,!b.isRemoved())return a="key"===c?b.key:"value"===c?b.value:[b.key,b.value],this.i=b,{value:a,done:!1};return this.i=void 0,{value:void 0,done:!0}}},A(b.prototype);var e=c.prototype;return v(c,r,function(a){var b=this,c=b.prototype||e;return a=a||y(c),x(a,{_es6map:!0}),a}),w.getter(c.prototype,"size",function(){if("undefined"==typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size}),x(c.prototype,{get:function(a){var b=Ja(a);if(null!==b){var c=this._storage[b];return c?c.value:void 0}for(var d=this._head,e=d;(e=e.next)!==d;)if(D.SameValueZero(e.key,a))return e.value},has:function(a){var b=Ja(a);if(null!==b)return"undefined"!=typeof this._storage[b];for(var c=this._head,d=c;(d=d.next)!==c;)if(D.SameValueZero(d.key,a))return!0;return!1},set:function(b,c){var d,e=this._head,f=e,g=Ja(b);if(null!==g){if("undefined"!=typeof this._storage[g])return this._storage[g].value=c,this;d=this._storage[g]=new a(b,c),f=e.prev}for(;(f=f.next)!==e;)if(D.SameValueZero(f.key,b))return f.value=c,this;return d=d||new a(b,c),D.SameValue(-0,b)&&(d.key=0),d.next=this._head,d.prev=this._head.prev,d.prev.next=d,d.next.prev=d,this._size+=1,this},"delete":function(a){var b=this._head,c=b,e=Ja(a);if(null!==e){if("undefined"==typeof this._storage[e])return!1;c=this._storage[e].prev,delete this._storage[e]}for(;(c=c.next)!==b;)if(D.SameValueZero(c.key,a))return c.key=c.value=d,c.prev.next=c.next,c.next.prev=c.prev,this._size-=1,!0;return!1},clear:function(){this._size=0,this._storage=Ka();for(var a=this._head,b=a,c=b.next;(b=c)!==a;)b.key=b.value=d,c=b.next,b.next=b.prev=a;a.next=a.prev=a},keys:function(){return new b(this,"key")},values:function(){return new b(this,"value")},entries:function(){return new b(this,"key+value")},forEach:function(a){for(var b=arguments.length>1?arguments[1]:null,c=this.entries(),d=c.next();!d.done;d=c.next())b?a.call(b,d.value[1],d.value[0],this):a(d.value[1],d.value[0],this)}}),A(c.prototype,function(){return this.entries()}),c}(),Set:function(){var a=function(a){var b=this;if(!D.TypeIsObject(b))throw new TypeError("Constructor Set requires 'new'");if(b=E(b),!b._es6set)throw new TypeError("bad set");if(x(b,{"[[SetData]]":null,_storage:Ka()}),"undefined"!=typeof a&&null!==a){var c=D.GetIterator(a),d=b.add;if(!D.IsCallable(d))throw new TypeError("bad set");for(;;){var e=D.IteratorNext(c);if(e.done)break;var f=e.value;d.call(b,f)}}return b},b=a.prototype;v(a,r,function(a){var c=this,d=c.prototype||b;return a=a||y(d),x(a,{_es6set:!0}),a});var c=function(a){if(!a["[[SetData]]"]){var b=a["[[SetData]]"]=new La.Map;Object.keys(a._storage).forEach(function(a){a=36===a.charCodeAt(0)?a.slice(1):"n"===a.charAt(0)?+a.slice(1):+a,b.set(a,a)}),a._storage=null}};return w.getter(a.prototype,"size",function(){if("undefined"==typeof this._storage)throw new TypeError("size method called on incompatible Set");return c(this),this["[[SetData]]"].size}),x(a.prototype,{has:function(a){var b;return this._storage&&null!==(b=Ja(a))?!!this._storage[b]:(c(this),this["[[SetData]]"].has(a))},add:function(a){var b;return this._storage&&null!==(b=Ja(a))?(this._storage[b]=!0,this):(c(this),this["[[SetData]]"].set(a,a),this)},"delete":function(a){var b;if(this._storage&&null!==(b=Ja(a))){var d=o(this._storage,b);return delete this._storage[b]&&d}return c(this),this["[[SetData]]"]["delete"](a)},clear:function(){this._storage?this._storage=Ka():this["[[SetData]]"].clear()},values:function(){return c(this),this["[[SetData]]"].values()},entries:function(){return c(this),this["[[SetData]]"].entries()},forEach:function(a){var b=arguments.length>1?arguments[1]:null,d=this;c(d),this["[[SetData]]"].forEach(function(c,e){
b?a.call(b,e,e,d):a(e,e,d)})}}),v(a,"keys",a.values,!0),A(a.prototype,function(){return this.values()}),a}()};x(i,La),(i.Map||i.Set)&&("function"!=typeof i.Map.prototype.clear||0!==(new i.Set).size||0!==(new i.Map).size||"function"!=typeof i.Map.prototype.keys||"function"!=typeof i.Set.prototype.keys||"function"!=typeof i.Map.prototype.forEach||"function"!=typeof i.Set.prototype.forEach||c(i.Map)||c(i.Set)||!d(i.Map,function(a){var b=new a([]);return b.set(42,42),b instanceof a}))&&(i.Map=La.Map,i.Set=La.Set),i.Set.prototype.keys!==i.Set.prototype.values&&v(i.Set.prototype,"keys",i.Set.prototype.values,!0),A(Object.getPrototypeOf((new i.Map).keys())),A(Object.getPrototypeOf((new i.Set).keys()))}i.Reflect||v(i,"Reflect",{});var Ma=i.Reflect,Na=function(a){if(!D.TypeIsObject(a))throw new TypeError("target must be an object")};if(x(i.Reflect,{apply:function(){return D.Call.apply(null,arguments)},construct:function(a,b){if(!D.IsCallable(a))throw new TypeError("First argument must be callable.");return D.Construct(a,b)},deleteProperty:function(a,b){if(Na(a),k){var c=Object.getOwnPropertyDescriptor(a,b);if(c&&!c.configurable)return!1}return delete a[b]},enumerate:function(a){return Na(a),new R(a,"key")},has:function(a,b){return Na(a),b in a}}),Object.getOwnPropertyNames&&x(i.Reflect,{ownKeys:function(a){Na(a);var b=Object.getOwnPropertyNames(a);return D.IsCallable(Object.getOwnPropertySymbols)&&b.push.apply(b,Object.getOwnPropertySymbols(a)),b}}),Object.preventExtensions&&x(i.Reflect,{isExtensible:function(a){return Na(a),Object.isExtensible(a)},preventExtensions:function(a){return Na(a),Qa(function(){Object.preventExtensions(a)})}}),k){var Oa=function(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b);if(!d){var e=Object.getPrototypeOf(a);return null===e?void 0:Oa(e,b,c)}return"value"in d?d.value:d.get?d.get.call(c):void 0},Pa=function(a,b,c,d){var e=Object.getOwnPropertyDescriptor(a,b);if(!e){var f=Object.getPrototypeOf(a);if(null!==f)return Pa(f,b,c,d);e={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if("value"in e){if(!e.writable)return!1;if(!D.TypeIsObject(d))return!1;var g=Object.getOwnPropertyDescriptor(d,b);return g?Ma.defineProperty(d,b,{value:c}):Ma.defineProperty(d,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}return e.set?(e.set.call(d,c),!0):!1},Qa=function(a){try{a()}catch(b){return!1}return!0};x(i.Reflect,{defineProperty:function(a,b,c){return Na(a),Qa(function(){Object.defineProperty(a,b,c)})},getOwnPropertyDescriptor:function(a,b){return Na(a),Object.getOwnPropertyDescriptor(a,b)},get:function(a,b){Na(a);var c=arguments.length>2?arguments[2]:a;return Oa(a,b,c)},set:function(a,b,c){Na(a);var d=arguments.length>3?arguments[3]:a;return Pa(a,b,c,d)}})}if(Object.getPrototypeOf){var Ra=Object.getPrototypeOf;x(i.Reflect,{getPrototypeOf:function(a){return Na(a),Ra(a)}})}if(Object.setPrototypeOf){var Sa=function(a,b){for(;b;){if(a===b)return!0;b=Ma.getPrototypeOf(b)}return!1};x(i.Reflect,{setPrototypeOf:function(a,b){if(Na(a),null!==b&&!D.TypeIsObject(b))throw new TypeError("proto must be an object or null");return b===Ma.getPrototypeOf(a)?!0:Ma.isExtensible&&!Ma.isExtensible(a)?!1:Sa(a,b)?!1:(Object.setPrototypeOf(a,b),!0)}})}if("Invalid Date"!==String(new Date(0/0))){var Ta=Date.prototype.toString,Ua=function(){var a=+this;return a!==a?"Invalid Date":Ta.call(this)};v(Ua,"toString",Ta.toString,!0),v(Date.prototype,"toString",Ua,!0)}var Va={anchor:function(a){return D.CreateHTML(this,"a","name",a)},big:function(){return D.CreateHTML(this,"big","","")},blink:function(){return D.CreateHTML(this,"blink","","")},bold:function(){return D.CreateHTML(this,"b","","")},fixed:function(){return D.CreateHTML(this,"tt","","")},fontcolor:function(a){return D.CreateHTML(this,"font","color",a)},fontsize:function(a){return D.CreateHTML(this,"font","size",a)},italics:function(){return D.CreateHTML(this,"i","","")},link:function(a){return D.CreateHTML(this,"a","href",a)},small:function(){return D.CreateHTML(this,"small","","")},strike:function(){return D.CreateHTML(this,"strike","","")},sub:function(){return D.CreateHTML(this,"sub","","")},sup:function(){return D.CreateHTML(this,"sup","","")}};return x(String.prototype,Va),Object.keys(Va).forEach(function(a){var b=String.prototype[a],c=!1;if(D.IsCallable(b)){var d=b.call("",' " '),e=[].concat(d.match(/"/g)).length;c=d!==d.toLowerCase()||e>2}else c=!0;c&&v(String.prototype,a,Va[a],!0)}),i}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Shadow=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(){var c,d;d=a("./absurd"),c=function(){function a(a,b){null==b&&(b={}),this.exports||(this.exports=b),this.exports.item=a,this.element=this.constructor.component.el.cloneNode(!0),rivets.bind(this.element,this.exports)}return a.setComponent=function(a){return this.component=d.component(this.name,a)(),this.component.populate()},a.setComponent({html:{"div.shadow-abstract-view":"AbstractView"},css:{".shadow-abstract-view":{"font-family":"monospace",display:"inline-block",position:"relative"}}}),a}(),b.exports=c}).call(this)},{"./absurd":2}],2:[function(a,b,c){(function(){b.exports=Absurd()}).call(this)},{}],3:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./abstract_view"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.setComponent({html:{"div.shadow-abstract-view .shadow-boolean-view":"{ item }"},css:{".shadow-boolean-view":{color:"#ef2929"}}}),b}(c),b.exports=d}).call(this)},{"./abstract_view":1}],4:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./expandable_view"),c=function(a){function b(a){var c;this.exports||(this.exports={}),(c=this.exports).name||(c.name=a.constructor.name),this.exports.toggleEditable=this.toggleEditable,b.__super__.constructor.call(this,a)}return f(b,a),b.setComponent({html:{"div.shadow-abstract-view .shadow-expandable-view .shadow-enumerable-view":{table:[{"thead[rv-on-click='toggle']":{tr:{"td[colspan='2']":"{ name }"}}},{"tbody[rv-if='expanded']":{"tr[rv-each-entry='item']":[{"td.key[rv-text='index']":""},{"td.value[rv-view='entry']":""}]}}]}},css:{".shadow-enumerable-view":{"box-shadow":"0 0 .5em rgba(0, 0, 0, .3)","max-height":"100%","overflow-x":"overlay","text-align":"left",color:"#d3d7cf","> table":{"min-width":"100%","border-spacing":"0","border-collapse":"collapse","> * > tr":{"> td":{margin:"0",padding:".5em"}},"> thead":{color:"#eeeeec","background-color":"#3465a4"},"> tbody":{"> tr":{"&:nth-child(even)":{background:"rgba(0, 0, 0, .1)"},"&:nth-child(odd)":{background:"rgba(255, 255, 255, .05)"},"> td":{"vertical-align":"top","&.key":{"text-align":"right",color:"#729fcf"},"&.value":{color:"blue"}}}}}}}}),b.prototype.toggleEditable=function(a){return a.srcElement.parentElement.setAttribute("data-editable")},b}(d),b.exports=c}).call(this)},{"./expandable_view":5}],5:[function(a,b,c){(function(){var c,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./abstract_view"),d=function(a){function b(){this.toggle=e(this.toggle,this),b.__super__.constructor.apply(this,arguments),this.exports.expanded=!1,this.exports.toggle=this.toggle}return g(b,a),b.setComponent({html:{"div.shadow-abstract-view .shadow-expandable-view":[{"button.shadow-toggle[rv-on-click='toggle']":"+"},{"div.shadow-expandee[rv-when='expanded']":""}]},css:{".shadow-expandable-view":{transition:"width 1s ease-in-out",".shadow-toggle":{cursor:"pointer"},"button.shadow-toggle":{background:"rgb(100, 100, 100)",color:"rgb(240, 240, 240)","font-size":"16px",width:"1em",height:"1em",padding:"0","line-height":"1em","text-align":"center",border:"1px solid rgb(70, 70, 70)","border-radius":"4px"}}}}),b.prototype.expand=function(){return this.exports.expanded=!0},b.prototype.collapse=function(){return this.exports.expanded=!1},b.prototype.toggle=function(){return this.exports.expanded?this.collapse():this.expand()},b}(c),b.exports=d}).call(this)},{"./abstract_view":1}],6:[function(a,b,c){(function(){var c;c={object:function(b){var c;return"object"!=typeof b?null:new(c=a("./enumerable_view"))(b)},"function":function(b){var c;return"function"!=typeof b?null:new(c=a("./function_view"))(b)},array:function(b){var c;return b instanceof Array?new(c=a("./enumerable_view"))(b):null},undefined:function(b){var c;return"undefined"!=typeof b?null:new(c=a("./undefined_view"))(b)},"null":function(b){var c;return null!==b?null:new(c=a("./null_view"))(b)},"boolean":function(b){var c;return"boolean"!=typeof b?null:new(c=a("./boolean_view"))(b)},number:function(b){var c;return"number"!=typeof b?null:new(c=a("./number_view"))(b)},string:function(b){var c;return"string"!=typeof b?null:new(c=a("./string_view"))(b)}},b.exports=Object.keys(c).reverse().map(function(a){return c[a]})}).call(this)},{"./boolean_view":3,"./enumerable_view":4,"./function_view":8,"./null_view":9,"./number_view":10,"./string_view":13,"./undefined_view":14}],7:[function(a,b,c){(function(){var c;c=a("./factories"),b.exports=function(a){var b,d,e,f;for(e=0,f=c.length;f>e;e++)if(b=c[e],d=b(a))return d}}).call(this)},{"./factories":6}],8:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./enumerable_view"),d=function(a){function b(a){var c;this.exports||(this.exports={}),(c=this.exports).name||(c.name=a.name),b.__super__.constructor.call(this,a)}return f(b,a),b.setComponent({html:{"div.shadow-abstract-view .shadow-expandable-view .shadow-enumerable-view .shadow-function-view":{table:[{"thead[rv-on-click='toggle']":{tr:{"td[colspan='2']":"function { name }"}}},{"tbody[rv-if='expanded']":{"tr[rv-each-entry='item']":[{"td.key[rv-text='index']":""},{"td.value[rv-view='entry']":""}]}}]}}}),b}(c),b.exports=d}).call(this)},{"./enumerable_view":4}],9:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./abstract_view"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.setComponent({html:{"div.shadow-null-view .shadow-undefined-view":"null"},css:{".shadow-null-view":{color:"#fcaf3e"}}}),b}(c),b.exports=d}).call(this)},{"./abstract_view":1}],10:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./abstract_view"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.setComponent({html:{"div.shadow-abstract-view .shadow-number-view":"{ item }"},css:{".shadow-number-view":{color:"#ad7fa0"}}}),b}(c),b.exports=d}).call(this)},{"./abstract_view":1}],11:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./expandable_view"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.setComponent({html:{"div.shadow-abstract-view .shadow-expandable-view .shadow-root-view .shadow-expandee":{"div.child[rv-view='item']":""}},css:{".shadow-root-view":{"&.shadow-expandee, >.shadow-expandee":{color:"pink",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0, .6)","text-align":"center"},"&.child, >.child":{padding:".5em",display:"inline-block","background-color":"#2e3436"}}}}),b}(c),b.exports=d}).call(this)},{"./expandable_view":5}],12:[function(a,b,c){(function(){var c,d;d=a("./factory"),a("./utils/rivets_shadow"),c=function(){return d.apply(null,arguments)},c.createRootView=function(a){return c.rootView=new c.RootView(a),document.body.appendChild(c.rootView.element)},c.show=function(a){return null!=c.rootView?c.rootView.exports.item=a:c.createRootView(a)},c.init=function(){return document.onkeyup=function(a){return function(b){return 192===b.which?(a.show(c.AbstractView),a.rootView.toggle()):void 0}}(this)},c.factories=a("./factories"),c.AbstractView=a("./abstract_view"),c.NullView=a("./null_view"),c.UndefinedView=a("./undefined_view"),c.BooleanView=a("./boolean_view"),c.StringView=a("./string_view"),c.FunctionView=a("./function_view"),c.EnumerableView=a("./enumerable_view"),c.ExpandableView=a("./expandable_view"),c.RootView=a("./root_view"),b.exports=c}).call(this)},{"./abstract_view":1,"./boolean_view":3,"./enumerable_view":4,"./expandable_view":5,"./factories":6,"./factory":7,"./function_view":8,"./null_view":9,"./root_view":11,"./string_view":13,"./undefined_view":14,"./utils/rivets_shadow":15}],13:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./abstract_view"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.setComponent({html:{"div.shadow-abstract-view .shadow-string-view":'"{ item }"'},css:{".shadow-string-view":{color:"#fce94f","max-width":"10em"}}}),b}(c),b.exports=d}).call(this)},{"./abstract_view":1}],14:[function(a,b,c){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./abstract_view"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.setComponent({html:{"div.shadow-abstract-view .shadow-undefined-view":"undefined"},css:{".shadow-undefined-view":{color:"#fcaf3e"}}}),b}(c),b.exports=d}).call(this)},{"./abstract_view":1}],15:[function(require,module,exports){(function(){var callbacks,factory;factory=require("../factory"),callbacks=new Map,rivets.adapters["."]={observe:function(a,b,c){var d;return console.log(a,b,c),d=function(a){var d,e,f,g;for(g=[],e=0,f=a.length;f>e;e++)d=a[e],d.name===b&&g.push(c());return g},callbacks.has(a)||callbacks.set(a,{}),callbacks.get(a)["rv_"+b]||(callbacks.get(a)["rv_"+b]=new WeakMap),callbacks.get(a)["rv_"+b].set(c,d),Object.observe(a,d)},unobserve:function(a,b,c){var d,e,f;return(d=null!=(e=callbacks.get(a))&&null!=(f=e["rv_"+b])?f.get(c):void 0)?Object.unobserve(a,d):void 0},get:function(a,b){return console.log(b,a),a[b]},set:function(a,b,c){return a[b]=c}},rivets.binders["each-*"]={"function":!0,bind:function(a){var b,c,d,e,f;if(console.log("bind"),this.exports=new Map,null==this.marker)b=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],a.removeAttribute(b),a.parentNode.insertBefore(this.marker,a),a.parentNode.removeChild(a);else for(f=this.iterated,d=0,e=f.length;e>d;d++)c=f[d],c.bind()},unbind:function(a){var b,c,d,e,f;for(console.log("unbind"),c=Object.keys(this.views),f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(this.binder["delete"].call(this,b));return f},routine:function(a,b){var c,d,e,f,g;for(null==b&&(b=[]),console.log("routine"),d=this.args[0],this.el=a,this.collection=b,this.views&&this.views[c]&&this.binder["delete"].call(this,c),this.views={},g=Object.keys(this.collection),e=0,f=g.length;f>e;e++)c=g[e],this.binder.add.call(this,c,this.collection[c]);return Object.observe(this.collection,function(a){return function(b){var d,e,f,g,h,i;for(i=[],g=0,h=b.length;h>g;g++)switch(d=b[g],e=d.name,f=d.object[d.name],d.type){case"add":i.push(a.binder.add.call(a,e,f));break;case"delete":i.push(a.binder["delete"].call(a,e,f));break;case"update":a.binder["delete"].call(a,c),i.push(a.binder.add.call(a,c,f));break;default:i.push(void 0)}return i}}(this))},add:function(a,b){var c,d,e,f,g,h,i,j;return f=this.args[0],c={index:a},c[f]=b,this.exports.set(a,c),Object.observe(c,function(b){return function(c){var d,e,f,g,h,i;for(i=[],g=0,h=c.length;h>g;g++)d=c[g],e=d.name,f=d.object[d.name],console.log(e,f,d),i.push(b.collection[a]=f);return i}}(this)),g=this.view.options(),g.preloadData=!0,i=this.el.cloneNode(!0),j=new rivets._.View(i,c,g),this.views[a]=j,j.bind(),e=Object.keys(this.collection),d=e.indexOf(a),h=d?e[parseInt(d)-1]:void 0,this.marker.parentNode.insertBefore(i,null!=h?h.nextSibling:void 0)},"delete":function(a,b){var c;return c=this.views[a],c.unbind(),c.els.forEach(function(a){return a.remove()}),delete this.views[a]}},rivets.binders.child=function(a,b){return a.innerHTML="",null!=b&&null!=b.nodeName?a.appendChild(b):void 0},rivets.binders.children=function(a,b){var c,d,e,f;if(a.innerHTML="",null!=b){for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(null!=(null!=c?c.nodeName:void 0)?a.appendChild(c):void 0);return f}},rivets.binders.view={"function":!0,routine:function(a,b){var c;return a.innerHTML="",c=factory(b),a.appendChild(c.element)}},rivets.binders.eval={"function":!0,bind:function(el){return el.onchange=function(_this){return function(event){return _this.model[_this.keypath]=eval(el.value)}}(this)},unbind:function(a){return a.onchange=null},routine:function(a,b){return a.value=b}}}).call(this)},{"../factory":7}]},{},[12])(12)});